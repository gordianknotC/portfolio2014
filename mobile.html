<html>
<head>
<title>01petmate</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="reset.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--

.group{
    overflow: hidden
    background-color:#333;
}
.content_container div{
    position:relative;
    float:none;
}
div.shado{
    box-shadow: 0px 0px 15px #444;
}
div#petmate_container{
    background-color:#333;
}
div.content_container {
	position:absolute;
	left:0px;
	top:0px;
    right:0px;
	min-width:100%;
	height:9115px;
}
div.page {
    position:relative;
    float:left;
	left:0px;
	top:0px;
	width:  100%;
    clear:both;
}
div.subpage{
    position:absolute;
    left:0px;
    top:0px;
    width:  100%;
}
img.bg{
    left:0px;
    width:100%;
}
img.glassbg{
    position:absolute;
    -webkit-clip-path:inset(38.9% 39.2% 23.48% 33%);

}
div.glass{
    overflow:hidden;
    position:absolute;

}
div.petmate_cover_text {
	position:absolute;
	left:33%;
	top:38.9%;
	width:27.8%;
	height:43.02%;
}
div.petmate_problemdisc_sceneA{
    width:100%;
    left:0px;
    top:0px;
}
div.petmate-problemdisc-sceneB {
	position:absolute;
	top:58.3%;
	width:39.2%;
    left:4.3%;
    height:20.47%;
}
div.petmate-problemdisc-sceneC {
	position:absolute;
	left:46.75%;
	top:58.3%;
	width:48.14%;
	height:24.9%;
}
div.petmate-problemdisc-txtB {
	position:absolute;
	left:4.34%;
	top:78.7%;
	width:39.26%;
	height:21.27%;
}
div.petmate-colored-graph, div.petmate-black-circular-figure, div.petmate-figure-text{
    position:absolute;
}
img.abs_bg{
    position:absolute;
    left:0px;
    top:0px;
}
img.asset{

}
video#petmate_video{
    top:82%;
    width:27.28%;
    left:50%;
    position: absolute;
    margin-left: -14.55%;
    margin-top: -23.3%;
}
div#radio_container{
    z-index:-20;
    background-color: #000;
}
div.radio_cover_text{
    position:absolute;
	left:24.43%;
	top:37.52%;
	width:27.87%;
	height:29.6%;
}
div.radio_sketchA{
    width:100%;
    left:0px;
    top:0px;
}
div.radio_sketchB{
    background-color: #65604e;
    width:100%;
    left:0px;
    top:0px;
}
div.page_sep{
    width:100%;
    height:0%;
}





div.mplamp_cover_title {
    position:absolute;
    left: 36.43%;
    top: 40.07%;
    width: 43.06%;
    height: 28.04%;
}

div.mplamp-sceneA {
    left: 0%;
    top: 0%;
    width: 39.78%;
}

div.mplamp-sceneB {
    top: 0%;
    width: 60.22%;
}

div.mplamp-sceneC {
    width: 60.22%;
}

div.mplamp-sceneD {
    left: 0%;
    top: 0%;
    width: 44.17%;
}

div.mplamp-sceneE {
    width: 55.83%;
    top: 0%;
}

div.mplamp-sceneF {
    left: 0%;
    top: 0%;
    width: 100%;
}

div.mplamp-scene {
    width: 100%;
}





div.peer_target{
    top:0px;
    left:0px;
    width:100%;
    position:absolute;
}
div.peer{
    width:100%;
    z-index:3;
}
div.usb_cover_text{
    position:absolute;
    top:53.978%;
}
div.usb_item{
    background-image: url("images/usb_item_background.jpg");
}
div.bracelet_cover_text{
    position:absolute;
    left:32.75%;
    top:66.632%;
    width:44.812%;
    height:9.812%;
}
div#usb_container > div.page div{
    float:left;
}
div#bracelet_container > div.page div{
    float:left;
}
div#ipostage_container > div.page div{
    float:left;
}
div#voiphone_container > div.page div{
    float:left;
}
div.ipostage_cover_text{
    position:absolute;
    float:left;
    width:26.812%;
    left:62%;
    top:47.8%;
    height:10.234%;
}
div.voiphone_cover_text{
    position:absolute;
    float:left;
    left:17.062%;
    top:71.9%;
    width:71%;
}
div.mpurse_cover_text{
    float:left;
    position:absolute;
    left:39.062%;
    top:41.044%;
    width:28.812%;
    height:53.019%;
}
div#footer{
    background: rgba(244,244,244,1);
    background: -moz-linear-gradient(left, rgba(244,244,244,1) 0%, rgba(239,239,239,1) 100%);
    background: -webkit-gradient(left top, right top, color-stop(0%, rgba(244,244,244,1)), color-stop(100%, rgba(239,239,239,1)));
    background: -webkit-linear-gradient(left, rgba(244,244,244,1) 0%, rgba(239,239,239,1) 100%);
    background: -o-linear-gradient(left, rgba(244,244,244,1) 0%, rgba(239,239,239,1) 100%);
    background: -ms-linear-gradient(left, rgba(244,244,244,1) 0%, rgba(239,239,239,1) 100%);
    background: linear-gradient(to right, rgba(244,244,244,1) 0%, rgba(239,239,239,1) 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f4f4f4', endColorstr='#efefef', GradientType=1 );
}


-->
</style>
<!-- End Save for Web Styles -->
<script type="application/javascript" src="jslib/jquery.js">      </script>
<script type="application/javascript" src="jslib/popcorn.js">        </script>
<script type="application/javascript" src="jslib/imageloader.js">      </script>
<script type="application/javascript" src="jslib/jquery.projectblocker.js">      </script>
<script type="application/javascript" src="jslib/imageMask.js">   </script>
<script type="application/javascript" src="jslib/TweenMax.js">    </script>
<script type="application/javascript" src="jslib/TimelineMax.js"></script>
<script type="application/javascript" src="jslib/plugins/ScrollToPlugin.js"></script>
<script type="application/javascript" src="jslib/scrollmagic/uncompressed/ScrollMagic.js"></script>
<script type="application/javascript" src="jslib/scrollmagic/uncompressed/plugins/animation.gsap.js"></script>
<script type="application/javascript" src="jslib/scrollmagic/uncompressed/plugins/debug.addIndicators.js"></script>
<script type="application/javascript" src="jslib/baselib.js">     </script>
<script type="application/javascript" src="jslib/target_script.js">     </script>
</head>
<body >
<!--build: python3 make_apk.py --mode=embedded --package=com.gordianknot.sample --manifest=testProject/manifest.json-->
<!-- Save for Web Slices (01petmate.psd) -->
<div id="header_menu_trigger" class="page_sep page"></div>
<div id="header_menu" class="scene header_menu">
    <div class="menu_headers" style="z-index:5000">
        <div class="menu_header" id="light_menu_header">
            <div id="header_menu_trigger">
                <div class="menu_logoW">
                    <img class="asset" src="images/none.png" data-src="images/menu_logoW.png" width="119" height="52" alt="">
                </div>
                <div class="menu_header-span"></div>

                <div class="menu_icon-set">
                    <div class="menu_text">
                        <img class="asset" src="images/none.png" data-src="images/menu_text.png" width="71" height="40" alt="">
                    </div>
                    <div id="layer_bt_light" class="menu_iconL">
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconL_over.png"></div>
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconL.png">     </div>
                    </div>
                        <img class="asset" src="images/none.png" data-src="images/header_08.png" width="2" height="40" alt="">
                    <div id="about_bt_light" class="menu_iconR">
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconR_over.png"></div>
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconR.png">     </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="menu_header menu_header_black" id="dark_menu_header">
            <div id="header_menu_trigger">
                <div class="menu_logoW">
                    <img class="asset" src="images/none.png" data-src="images/menu_logoW_black.png" width="119" height="52" alt="">
                </div>
                <div class="menu_header-span"></div>
                <div class="menu_icon-set">
                    <div class="menu_text">
                        <img class="asset" src="images/none.png" data-src="images/menu_text_black.png" width="71" height="40" alt="">
                    </div>
                    <div id="layer_bt_dark" class="menu_iconL">
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconL_black_over.png"></div>
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconL_black.png">     </div>
                    </div>
                    <div style="width:2px;height:40px;"></div>
                    <div id="about_bt_dark" class="menu_iconR">
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconR_black_over.png"></div>
                        <div><img class="asset" src="images/none.png" data-src="images/menu_iconR_black.png">     </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="header_menu_container" style="z-index: 4990;">
        <div class="menu_title">
            <div class="menu_logoB">
                <img class="asset" src="images/none.png" data-src="images/menu_logoB.png" width="121" height="42" alt="">
            </div>
            <div class="menu_section-text1">
                <img class="asset" src="images/none.png" data-src="images/menu_section_text1.png" width="121" height="48" alt="">
            </div>
        </div>
        <div class="header_menu_icon_table">
            <!--R1-->
            <div class="header_menu_icon_row">
                <!--  cell 1-->
                <a href="#petmate_container">
                    <div class="header_menu_item_cell left_cell">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_bold.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num1.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item1_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item1.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description1.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                    </div>
                </a>
                <!-- cell 2-->
                <a href="#radio_container">
                    <div class="header_menu_item_cell middle_cell">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_bold.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num2.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item2_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item2.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description1.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                    </div>
                </a>
                <!-- cell3 -->
                <a href="#mplamp_container">
                    <div class="header_menu_item_cell right_cell">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_bold.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num3.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item3_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item3.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description3.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                    </div>
                </a>
            </div>
            <!--R2-->
            <div class="header_menu_icon_row" style="height:122px">
                <!--  cell 4-->
                <a href="#usb_container">
                    <div class="header_menu_item_cell left_cell">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num4.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item4_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item4.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description4.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                    </div>
                </a>
                <!-- cell 5-->
                <a href="#bracelet_container">
                    <div class="header_menu_item_cell middle_cell" style="height:122px">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num5.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item5_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item5.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description5.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                    </div>
                </a>
                <!-- cell6 -->
                <a href="#ipostage_container">
                    <div class="header_menu_item_cell right_cell">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num6.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item6_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item6.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description6.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                    </div>
                </a>
            </div>
            <!--R2-->
            <div class="header_menu_icon_row">
                <!--  cell 7-->
                <a href="#voiphone_container">
                    <div class="header_menu_item_cell left_cell">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num7.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item7_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item7.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description7.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                        <div class="horizontal_bar_thin">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin2.png">
                        </div>
                    </div>
                </a>
                <!-- cell 8-->
                <a href="#mpurse_container">
                    <div class="header_menu_item_cell middle_cell">
                        <div class="horizontal_bar_thin_tp">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num8.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item8_over.png"></div>
                            <div><img class="asset" src="images/none.png" data-src="images/menu_item8.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description8.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                        <div class="horizontal_bar_thin">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin2.png">
                        </div>
                    </div>
                </a>
                <!-- cell9 -->
                <a href="#others_container">
                    <div class="header_menu_item_cell right_cell">
                        <div class="horizontal-bar-bold">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin.png">
                        </div>
                        <div class="header_menu_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                        </div>
                        <div class="header_cell_num">
                            <img class="asset" src="images/none.png" data-src="images/menu_num9.png">
                        </div>
                        <div class="__header_vertical_bar">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                        </div>
                        <div class="menu_item1">
                            <div class="hide" ><img class="asset" src="images/none.png" data-src="images/menu_item9_over.png"></div>
                            <div ><img class="asset" src="images/none.png" data-src="images/menu_item9.png">     </div>
                        </div>
                        <div class="menu_description1">
                            <img class="asset" src="images/none.png" data-src="images/menu_description9.png">
                        </div>
                        <div class="__header_vertical_bar2">
                            <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                        </div>
                        <div class="horizontal_bar_thin">
                            <img class="asset" src="images/none.png" data-src="images/horizontal_bar_thin2.png">
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div class="menu_title" style="height:68px;padding-top:30px;">
            <div class="menu_section-text1">
                <img class="asset" src="images/none.png" data-src="images/menu_section_text1.png" width="121" height="48" alt="">
            </div>
        </div>
        <div class="header_menu_icon_table" style="height:auto;">
            <div class="header_menu_icon_row">
                <!--  cell 1-->
                <div class="header_menu_item_cell left_cell">
                    <div class="horizontal-bar-bold">
                        <img class="asset" src="images/none.png" data-src="images/horizontal_bar_bold.png">
                    </div>
                    <div class="header_menu_vertical_bar">
                        <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                    </div>
                    <div class="header_cell_num">
                        <img class="asset" src="images/none.png" data-src="images/menu_num1.png">
                    </div>
                    <div class="__header_vertical_bar">
                        <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                    </div>
                    <div class="menu_item1">
                        <div><img class="asset" src="images/none.png" data-src="images/menu_item1_over.png"></div>
                        <div><img class="asset" src="images/none.png" data-src="images/menu_item1.png">     </div>
                    </div>
                    <div class="menu_description1">
                        <img class="asset" src="images/none.png" data-src="images/menu_description1.png">
                    </div>
                    <div class="__header_vertical_bar2">
                        <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                    </div>
                </div>
                <!-- cell 2-->
                <div class="header_menu_item_cell middle_cell">
                    <div class="horizontal-bar-bold">
                        <img class="asset" src="images/none.png" data-src="images/horizontal_bar_bold.png">
                    </div>
                    <div class="header_menu_vertical_bar">
                        <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                    </div>
                    <div class="header_cell_num">
                        <img class="asset" src="images/none.png" data-src="images/menu_num2.png">
                    </div>
                    <div class="__header_vertical_bar">
                        <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                    </div>
                    <div class="menu_item1">
                        <div><img class="asset" src="images/none.png" data-src="images/menu_item2_over.png"></div>
                        <div><img class="asset" src="images/none.png" data-src="images/menu_item2.png">     </div>
                    </div>
                    <div class="menu_description1">
                        <img class="asset" src="images/none.png" data-src="images/menu_description1.png">
                    </div>
                    <div class="__header_vertical_bar2">
                        <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                    </div>
                </div>
                <!-- cell3 -->
                <div class="header_menu_item_cell right_cell">
                <div class="horizontal-bar-bold">
                    <img class="asset" src="images/none.png" data-src="images/horizontal_bar_bold.png">
                </div>
                <div class="header_menu_vertical_bar">
                    <img class="asset" src="images/none.png" data-src="images/vertical_bar.png">
                </div>
                <div class="header_cell_num">
                    <img class="asset" src="images/none.png" data-src="images/menu_num3.png">
                </div>
                <div class="__header_vertical_bar">
                    <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_B.png">
                </div>
                <div class="menu_item1">
                    <div><img class="asset" src="images/none.png" data-src="images/menu_item3_over.png"></div>
                    <div><img class="asset" src="images/none.png" data-src="images/menu_item3.png">     </div>
                </div>
                <div class="menu_description1">
                    <img class="asset" src="images/none.png" data-src="images/menu_description3.png">
                </div>
                <div class="__header_vertical_bar2">
                    <img class="asset" src="images/none.png" data-src="images/header_item_verticalbar_A.png">
                </div>
            </div>
            </div>
        </div>
        <div id="about_container_trigger" class="page_sep page"></div>
        <div id="about_container" class="hide menu_title" style="height:auto;width:100%;z-index: -1;background-image:url(images/bg_pattern.jpg);box-shadow: 0px 0px 5px #101010; opacity:1; display:block;">
            <div class="about_header" style="height:90px;left:0;"></div>
            <div class="about_container" style="width:942px;height:auto;left:50%;margin-left:-471px;">
                <div class="about_left" style="position;relative;float:left; width:306px">
                    <div class="about_portrait" style="float:left;width:306px;height:350px; ">
                        <img class="asset" src="images/none.png" data-src="images/portrait.png">
                    </div>
                    <div class="about_title" style="float:left;width:306px;height:187px; ">
                        <img class="asset" src="images/none.png" data-src="images/about_title.png">
                    </div>
                </div>
                <div class="about_right" style="position:relative;width:634px;float:right;height：auto;">
                    <div class="about_content">
                        <div class="about_left_content" style="width: 62%;">
                            <div style="margin: 20px 10px 20px 20px;  float: left;">
                                <h4 style="color: rgb(190, 44, 0);">About</h4>
                                <p>
                                    在自我成長的道路上我像個修道人，不大 理會事俗的看法，不吃喝玩樂，能長時間專注做自已的事，面對內外在價值衝突時也能先安慰自已 而去滿足他人期望，我是個接受者，compromiser 及執行者，傾聽者，沒有天馬行空的創意，但的卻是估good accompany，在創作的道路上我寫過音樂，網頁，androidAPP，工業設計，完全邏輯的程式設計工作讓我有點吃力，完全感性的音樂少了一點意義的連結，我不算聰明也不算笨，常覺的自已什麼都能做，總是在全身心投入失敗後才真正看見自已的限制.
                                </p>
                                <p>
                                    禪說： 將心待悟, 求昇反墮，過份執著常帶來反效果，但也正是因為這個反效果能該人知所進退有所取捨，也正因為有所取捨才能帶來心靈的自由，一個立足於創作的創作者其特質便是透過成長、衝撞、實現與現實達到自我消融，體會什麼是生活應當一切現成，當心不再追逐，悠閒之心帶來敏銳的心境，生活的趣味就更多，來自生活中的創意也就變多了，我想設計來自生活的心境便是如此，與其追求大眾文化所付予的價值， 我寧可選擇alternative，少一分盲從多一份真實的自我！我熱愛音樂，心理學禪與哲學，喜歡探索生命的義意價值，與一切可能利他的事物，期望自已在專業非專業上能夠有意無意為社佰出一份力做到利他
<br><br>MBTI人格類型量表屬 於INTP 與INFPhttp://www.creativebloq.com/career/which-personality-types-make-best-designers-71412160 該人格在設計師中佔百分之十，好學是我的優點，缺點是理想主義與容易compromise！
                                </p>

                                <p>
                                在畢業以前我曾花了五年的時間寫電子音樂，及1年的時間進行網頁設計
                                及FLASH、在畢業前我曾任職PAYEASY 小物網DM設計師、喬登美語電
                                維修兼電腦老師、LUSH 推銷員、愛買及安內衣部補貨員、高峰百貨電腦
                                專櫃、網頁SOHO 。
                                </p>
                                <!--<p>-->
                                <!--以往總覺得找工作不是什麼難事，但畢業以後卻陷入了取捨的兩難，我花-->
                                <!--了半年放下了多媒體音樂，並又花了三年鑽研網頁設計，一直到我能夠獨-->
                                <!--立作業為止，-->
                                <!--</p>-->
                                <!--<p>-->
                                <!--但網頁設計的學習曲線超乎我的想像，當我開始能夠獨立作-->
                                <!--業時，我試著去跑整個流程，但冗長的開發時間，及大量的重複性作業，-->
                                <!--讓我一直苦尋不著縮短開發時間的方法，如果沒辦法縮短開發時間作為一-->
                                <!--個兼職職業是否真的適合，而正當我開始問自己是否真的有能力兼顧工業-->
                                <!--設計與網頁設計時 , 我才開始驚覺問題的所在，我想起以前學襌的筆記，-->
                                <!--無意間看見聖嚴師父的一句話：世界上沒有非你不可的事，並沒有一定要-->
                                <!--做什麼，只有當什麼事需要你時便全力以赴！這是禪喜的關鍵，也就是當-->
                                <!--下，實際，專注與奉獻。-->
                                <!--</p>-->
                                <!--<p>-->
                                <!--佛教徒透過不斷的犠牲、奉獻、給予愛與關懷進而放下自我而領會其中-->
                                <!--的禪喜，並透過坐禪、內觀培養專注力；籍由不斷辯證佛理進而放下自-->
                                <!--我，以他律進而自律，能自律的人，心靈得到自由，他們不會白費心力-->
                                <!--和體力在不該有的追逐和享樂上，於是悠閒之心帶來敏銳的心境，生活-->
                                <!--的趣味就更多，來自生活中的創意也就變多了，這是設計來自生活的心-->
                                <!--境，也是我學襌的目的，因為祂讓我找到設計與人生的大方向，但當我-->
                                <!--開始鑽研網頁設計時，我發覺自己陷入了無止盡追逐！-->
                                <!--</p>-->
                                <!--<p>-->
                                <!--禪宗有一句話：將心待悟，求昇反墮，便是說明當心極度執著時，即使-->
                                <!--再努力也不容易有所成就，也就是當心有所住時，創意便施展不開，尤-->
                                <!--其當我看見彿法在解釋精進與怠墮的不同時提到，若一個人不是用十年-->
                                <!--二十年的時間設定學習一項專業時，佛法將這一類人稱作怠墮菩薩！-->
                                <!--</p>-->
                                <!--<p>-->
                                <!--頓時才發覺自己的兼職心理有多麼不尊重，不論是工業設計或網頁設計-->
                                <!--都很不尊重，也許不經一番割捨終將脫泥帶水，想發展設計所談的工匠-->
                                <!--精神一定得經過一番割捨，於是又花了半年的時間更新工業設計的專業-->
                                <!--，找回以前做設計的感覺！-->
                                <!--</p>-->
                                <!--<p>-->
                                <!--由於熱愛心理學與禪，在設計上比較適合，設計執行與細節設計，在<a href="http://teachers.tssh.tpc.edu.tw/cc2/%E5%A4%9A%E5%85%83%E6%99%BA%E6%85%A7/muti_index.HTM">-->
                                <!--多元智慧中</a>，比較偏於第七種內省智慧型人！MBTI人格類型量表屬-->
                                <!--於INTP 與INFP。</p>-->

                                <!--<p>-->
                                <!--見<br>-->
                                <!--<a href="http://www.michaelroller.com/?p=984" target="_blank">What personality type makes the best designer?</a> <br>-->
                                <!--<a href="http://types.yuzeli.com/paper/personality/" target="_blank">MBTI人格類型</a><br>-->
                                <!--</p>-->
                            </div>
                        </div>
                        <div class="about_right_content" style=" width: 38%;">
                            <div style="margin: 20px 0px 20px 10px; float: left;">
                                <p>
                                <b>經歷:</b>								<br>
                                高峰百貨電腦專櫃							<br>
                                中央研究院體育館收費人員					<br>
                                愛買吉安女裝部							<br>
                                喬登美語電腦老師							<br>
                                mindear思數位創意(payeasy 商品DM、網頁設計)<br>
                                金華城lush專櫃				<br>
                                網頁soho						<br>
                                多媒體遊戲配樂				<br>
                                網路音樂創作人				<br>
                                                            <br>
                                                            <br>
                                內湖高工電子科				<br>
                                台灣科技大學工業設計系		<br>
                                工業電子丙級					<br>
                                                            <br>
                                                            <br>
                                2002台北燈節花燈競賽佳作		<br>
                                2003 中華盃遊戲設計大賽冠軍	<br>
                                2004 intel pc造型王第3名		<br>
                                2004 oic設計大賽佳作			<br>
                                2004 mobilehero通訊大賽		<br>
                                                            <br>
                                                            <br>
                                <b>技能</b>					<br>
                                工業設計						<br>
                                多媒體網頁設計（ＷＥＢ３Ｄ、虛擬商品展示，ＦＬＡＳＨ互動設計，html網頁設計，多媒體配樂）<br>
                                                                                        <br>
                                                                                        <br>
                                <b>應用軟體</b>											<br>
                                3d 建模：<br>modo401 , solidworks2009 , aliasStudio2010		<br>
                                3d 彩現：<br>modo401 , 3d studio + vray						<br>
                                即時3d：<br>alias showcase , unity3d , blaze3d				<br>
                                2d向量：<br>adobe illustrator								<br>
                                2d點陣：<br>adobe photoshop , alias sketchbook				<br>
                                                                                        <br>
                                                                                        <br>
                                <b>腳本語言</b>											<br>
                                ActionScript , Python , Javascript , BoosScript			<br>
                                                                                        <br>
                                                                                        <br>
                                <b>MVC and framework</b>								<br>
                                jQuery , jamalMVC , Web2Py , Monorail , Gaiaframework	<br>
                                                                                        <br>
                                                                                        <br>
                                <a href="https://sites.google.com/site/fourudesign/images/4UdESIGN.swf" target="_blank">個人網頁</a>		<br>
                                <a href="http://4udesign.alwaysdata.net" target="_blank">線上作品集(使用firefox 請開啟 javascript)</a>	<br>
                                <br>
                                <br>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="menu_dropdown_span menu_title">
            <img src="images/none.png" data-src="images/header_menu_dropdown_arrow.png" style="width:116px;" class="asset center">
        </div>
    </div>
</div>

<div id="header_container_sep" class="page page_sep"></div>


<div class="content_container" style="z-index:0">
    <!-- petmate blur cover -->
    <div id="petmate_container" class='page group' style="z-index:120">
        <!-- petmate clear cover -->
        <div class="petmate_cover_clear page" style="position:relative">
            <img class="asset bg abs_bg" src="images/none.png" data-src="images/petmate_cover_clear.jpg">
        </div>
        <div class="petmate_cover_blur page glass shado">
            <div>
                <img class="asset bg" src="images/none.png" data-src="images/petmate_cover_blur.jpg">
            </div>
        </div>
        <div class="page petmate_cover_text_set glass">
            <div class="petmate_cover_text" style="z-index:5">
                <img class="asset bg petmate_cover_text" src="images/none.png" data-src="images/petmate_cover_text.png">
            </div>
            <img class="asset bg glassbg" style="-webkit-clip-path:inset(38.9% 39.2% 23.48% 33%)" src="images/none.png" data-src="images/petmate_cover_blur.jpg">
            <img class="asset bg petmate_cover_text_glassbg" style="visibility:hidden;" src="images/none.png" data-src="images/petmate_cover_blur.jpg">
        </div>
        <!-- petmate sketch -->
        <div class="page petmate_sketch_img" >
            <img class="asset bg" src="images/none.png" data-src="images/petmate_sketch_figure.png"  >
        </div>
        <div class="page petmate_problemdisc shado" style="background-color:#333;box-shadow: 0px 0px 8px #222;">
            <div class="petmate_problemdisc_sceneA">
                <img class="asset bg" src="images/none.png" data-src="images/petmate_problemdisc_sceneA.jpg">
            </div>
            <div style="float:none;">
                <img class="asset bg" src="images/none.png" data-src="images/petmate_problemdisc_footer.png">
            </div>

            <div class="petmate-problemdisc-sceneB">
                <img class="asset bg"  src="images/none.png" data-src="images/petmate_problemdisc_sceneB.jpg">
            </div>

            <div class="petmate-problemdisc-sceneC">
                <img class="asset bg"  src="images/none.png" data-src="images/petmate_problemdisc_sceneC.jpg">
            </div>

            <div class="petmate-problemdisc-txtB">
                <img class="asset bg"  src="images/none.png" data-src="images/petmate_problemdisc_txtB.png">
            </div>
        </div>
        <div class="petmate_figures shado">
            <!-- petmate graph backgroundA -->
            <div class="petmate-figure-background page shado">
                <img class="asset bg" src="images/none.png" data-src="images/petmate_figure_background.png" >
            </div>

            <!-- petmate graph backgroundB -->
            <div class="petmate-black-circular-figure page">
                <img class="asset bg" src="images/none.png" data-src="images/petmate_black_circular_figure.png" >
            </div>

            <!-- petmate colored graphc -->
            <div class="petmate-colored-graph page">
                <video id="petmate_video" class="bg" poster="images/petmate_video_preview.png">
                <source src="" data-src="video/petmate.mp4"/>
                </video>
                <img class="asset bg" style="position:relative" src="images/none.png" data-src="images/petmate_colored_graph.png">
            </div>

            <!-- petmate graphic description -->
            <div class="petmate-figure-text page">
                <img class="asset bg" src="images/none.png" data-src="images/petmate_figure_text.png">
            </div>
        </div>
    </div>
    <div id="petmate_sep_radio" class="page page_sep group"></div>
    <!-------------------------------->
    <!-------------------------------->
    <div id="radio_container" class="page group" style="z-index:110">
        <!-------------------------------->
        <div class="radio_cover_bg page shado" style="position:relative">
            <div class="radio_cover_text page">
                <img class="asset bg" src="" data-src="images/radiolight_cover_text.png">
            </div>
            <video id="radiolamp_video" style="width:100%" poster="images/radiolight_blur_cover.jpg">
                <source src="" data-src="video/radiolamp.mp4"/>
            </video>
        </div>
        <!-------------------------------->
        <div class="radio_sketch_img subpage shado">
            <img class="bg shado" src="images/radiolight_sketch_lay1.png">
            <div class="radio_sketchA"><img class="bg" src="images/radiolight_sketchA.jpg"  ></div>
            <div class="radio_sketchB"><img class="bg" src="images/radiolight_sketchB.png" ></div>
        </div>
        <!-------------------------------->
        <div class="radio_scene shado subpage">
            <div class="radiolight-sceneA" style="float:left;width:53.06%">
                <img class="bg" src="images/radiolight_sceneA.jpg" >
                <img class="bg" src="images/radiolight_scene_logo.png">
                <img class="bg" src="images/radiolight_sceneB.jpg" >
            </div>
            <div class="radiolight-sceneB" style="float:right;width:46.94%;">
                <img class="bg" src="images/radio_sceneF.png" >
                <img class="bg" src="images/radio_scene_description.jpg">
                <div style="float:left;width:41.41%">
                    <img class="bg" src="images/radio_sceneC.jpg">
                    <img class="bg" src="images/radio_sceneD.jpg">
                </div>
                <img class="bg" src="images/radio_sceneE.jpg" style="float:right;width:58.58%">
            </div>
        </div>
    </div>
    <div id="radio_sep_mplamp" class="page page_sep group"></div>
    <!-------------------------------->
    <!-------------------------------->
    <div id="mplamp_container" class="page group" style="z-index:100;width:100%;background-color: #000">
        <div id="mplamp_precover_sep" class="page page_sep group"></div>
        <div class="page mplamp-cover shado" style="position:relative;">
            <img class="bg abs_bg" src="images/mplamp_cover.jpg">
        </div>
        <!-------------------------------->
        <div class="mplamp_blur_cover page glass shado">
            <div>
                <img class="asset bg" src="images/mplamp_blur_cover.jpg">
            </div>
        </div>
        <!-------------------------------->
        <div class="page mplamp_cover_text_set" style="position:absolute">
            <div class="mplamp_cover_title">
                <img class="asset bg" src="images/mplamp_cover_title.png">
            </div>
            <img class="asset bg mplamp_cover_text_glassbg" style="visibility:hidden;" src="images/mplamp_blur_cover.jpg">
        </div>
        <!-------------------------------->
        <div class="mplamp_cover_sketch_sep"></div>
        <!-------------------------------->
        <div class="page mplamp_sk1" style="background-color: #000">
            <div class="mplamp-problemdisc shado">
                <img class="bg" src="images/mplamb_problemdisc.jpg">
            </div>
            <!-------------------------------->
            <div class="mplamp-sketchA shado">
                <img class="bg" src="images/mplamp_sketchA.jpg">
            </div>
            <!-------------------------------->
            <div class="mplamp-sketchB page shado">
                <img class="bg" src="images/mplamp_sketchB.jpg">
            </div>
        </div>
        <!-------------------------------->
        <div class="mplamp_sketch_scene1_sep"></div>
        <!-------------------------------->
        <div class="page mplamp-scene1 subpage">
            <div>
                <div class="mplamp-sceneA" style="float:left;">
                    <img class="bg" src="images/mplamp_sceneA.jpg">
                </div>
                <div class="mplamp-sceneB" style="float:left;">
                    <img class="bg" src="images/mplamp_sceneB.jpg">
                </div>
                <div class="mplamp-sceneC" style="float:left;">
                    <img class="bg" src="images/mplamp_sceneC.jpg">
                </div>
            </div>
            <img class="bg abs_bg" src="images/mplamp_scene_layoutA.png">
        </div>
        <!-------------------------------->
        <div class="mplamp_scene1_scene2_sep"></div>
        <!-------------------------------->
        <div class="page mplamp-scene2 subpage">
            <div class="mplamp-sceneD" style="float:left;">
                <img class="bg" src="images/mplamp_sceneD.png">
            </div>
            <div class="mplamp-sceneE" style="float:left;">
                <img class="bg" src="images/mplamp_sceneE.jpg">
            </div>
            <div class="mplamp-sceneF" style="float:left;">
                <img class="bg" src="images/mplamp_sceneF.jpg">
            </div>
            <img class="bg" src="images/mplamp_scene_layoutB.png">
        </div>
    </div>
    <div id="mplamp_sep_usb" class="page page_sep group"></div>
    <!-------------------------------->
    <!-------------------------------->
    <div id="usb_container" class="page group" style="width:100%;z-index:90;">
        <div id="usb_precover_sep" class="page page_sep group"></div>
        <!--usb clear cover--><!-------------------------------->
        <div class="page usb_clear_cover" style="position:relative">
            <img class="asset bg" src="images/none.png" data-src="images/usb_clear_cover.jpg"  >
        </div>
        <!--usb blur cover--><!-------------------------------->
        <div class="page usb_blur_cover glass shado" style="top:0px">
            <div>
                <img class="asset bg" src="images/usb_blur_cover.jpg">
            </div>
        </div>
        <!--usb cover_text and blurred cover--><!-------------------------------->
        <div class="page" style="position:absolute;top:0px">
            <div class="page usb_cover_text_set"  >
                <div class="usb_cover_text" style="z-index:5">
                    <img class="bg usb_cover_text" src="images/usb_cover_text.png">
                </div>
                <img class="bg usb_cover_text_bg" style="position:absolute;-webkit-clip-path:inset(53.9% 0% 26.1% 0%)" src="images/usb_blur_cover.jpg">
                <img class="bg usb_cover_text_glassbg" style="visibility:hidden;" src="images/usb_blur_cover.jpg">
            </div>

        </div>
        <div class="page usb_items shado" style="background-color:#625D4A">
            <!--usb cover scene--><!-------------------------------->
            <div class="page usb_theme">
                <img class="asset bg" src="images/none.png" data-src="images/usb_cover_scene.jpg">
            </div>
            <!--usb item--><!-------------------------------->
            <div class="page usb_item usb_pageA" style="background-color:#5a5644">
                <div style="width:100%">
                    <img class="bg" src="images/usb_pageA_tp.png">
                </div>
                <div style="float:left;width:61%;">
                    <img class="bg" src="images/usb_pageA_l.png">
                </div>
                <div style="float:left;top:14.62%; width:19.25%;">
                    <div class="peer">
                        <img class="bg" src="images/usb_pageA_peer.png">
                    </div>
                    <div class="peer_target">
                        <img class="bg" src="images/usb_pageA_peer_target.jpg">
                    </div>
                </div>
                <div style="float:left;top:14.62%; width:19.75%;">
                    <img class="bg" src="images/usb_pageA_r.png">
                </div>
                <img class="bg abs_bg" src="images/usb_pageA_layout.png">
            </div>
            <!--pageB--><!-------------------------------->
            <div class="page usb_pageB" style="background-color: #625d4a">
                <div style=" left:0%; top:0%; width:50.31%">
                    <img class="bg" src="images/usb_pageB_l.png" >
                </div>
                <div style="top:0px; width:20.81%;">
                    <div class="peer">
                        <img class="bg" src="images/usb_pageB_peer.png" >
                    </div>
                    <div class="peer_target">
                        <img class="bg" src="images/usb_pageB_peer_target.jpg">
                    </div>
                </div>
                <div style="top:0px; width:28.87%;">
                    <img class="bg" src="images/usb_pageB_r.png" >
                </div>
                <img class="abs_bg bg" src="images/usb_pageB_layout.png">
            </div>
            <!--pageC--><!-------------------------------->
            <div class="page usb_pageC" style="background-color:#625d4a;">
                <div style="left:0px; top:0px; width:25.87%;">
                    <img class="bg" src="images/usb_pageC_l.png">
                </div>
                <div style="top:0px; width:18.68%;">
                    <div  class="peer">
                        <img class="bg" src="images/usb_pageC_peer.png">
                    </div>
                    <div class="peer_target">
                        <img class="bg" src="images/usb_pageC_peer_target.jpg">
                    </div>
                </div>
                <div style="top:0px; width:55.43%;">
                    <img class="bg" src="images/usb_pageC_r.png">
                </div>
                <img class="abs_bg bg" src="images/usb_pageC_layout.png">
            </div>
            <!--pageD--><!-------------------------------->
            <div class="page usb_pageD" style="background-color:#625d4a">
                <div style="left:0px; top:0px; width:60%;">
                    <img class="bg" src="images/usb_pageD_l.png">
                </div>

                <div style=" top:0px; width:20.312%">
                    <div  class="peer">
                        <img class="bg" src="images/usb_pageD_peer.png">
                    </div>
                    <div class="peer_target">
                        <img class="bg" src="images/usb_pageD_peer_target.jpg">
                    </div>
                </div>

                <div style=" top:0px; width:19.687%; ">
                    <img class="bg" src="images/usb_pageD_r.png">
                </div>
                <img class="bg abs_bg" src="images/usb_pageD_layout.png">
            </div>
            <!--pageE--><!-------------------------------->
            <div class="page usb_pageE" style="background-color:#4c4739">
                <div style="left:0px; top:0px; width:53.812%;">
                    <img class="bg" src="images/usb_pageE_l.png">
                </div>
                <div style=" top:0px; width:20.312%;">
                    <div  class="peer">
                        <img class="asset bg" src="images/none.png" data-src="images/usb_pageE_peer.png"  >
                    </div>
                    <div class="peer_target">
                        <img class="bg" src="images/usb_pageE_peer_target.jpg">
                    </div>
                </div>
                <div style=" top:0px; width:25.875%;">
                    <img class="bg" src="images/usb_pageE_r.png">
                </div>
            </div>
            <!--pageF--><!-------------------------------->
            <div class="page usb_pageF" style="background-color:#625d4a">
                <!---->
                <div style="left:0px; top:0px; width:30.75%;">
                    <img class="asset bg" src="images/none.png" data-src="images/usb_pageF_l.png"  >
                </div>
                <!---->
                <div style="left:0px; top:0px; width:18.875%;">
                    <div  class="peer">
                        <img class="asset bg" src="images/none.png" data-src="images/usb_pageF_peer.png"  >
                    </div>
                    <div class="peer_target">
                        <img class="bg" src="images/usb_pageF_peer_target.jpg">
                    </div>
                </div>
                <!---->
                <div style="top:0px; width:50.375%;">
                    <img class="asset bg" src="images/none.png" data-src="images/usb_pageF_r.png"  >
                </div>
            </div>
            <!--pageG--><!-------------------------------->
            <!--<div class="page ipc_title" style="height:300px; background-color:#625d4a">-->
                <!--<img class="asset bg" src="images/none.png" data-src="images/ipc_title.png" class="bg">-->
            <!--</div>-->

            <!--<div class="page ipc_mechA">-->
                <!--<img class="asset bg" src="images/none.png" data-src="images/usb_mechA.jpg" class="bg">-->
            <!--</div>-->
            <!--pageH--><!-------------------------------->
             <!--<div class="page ipc_mechB">-->
                <!--<img class="asset bg" src="images/none.png" data-src="images/usb_mechB.jpg" class="bg">-->
            <!--</div>-->
        </div>
    </div>
    <div id="usb_sep_bracelet" class="page page_sep group"></div>
    <!-------------------------------->
    <!-------------------------------->
    <div id="bracelet_container" class="page group" style="width:100%;z-index:80;">
        <div id="bracelet_precover_sep" class="page page_sep group"></div>
        <!-- clear cover --><!-------------------------------->
        <div class="page bracelet_clear_cover" style="position:relative;">
            <img class="asset bg" src="images/none.png" data-src="images/bracelet_cover.jpg"  >
        </div>
        <!-- gloss cover -->
        <div class="page bracelet_blur_cover glass shado" style="top:0px">
            <div>
                <img class="asset bg" src="images/bracelet_blur_cover.jpg">
            </div>
        </div>
        <!-- cover text and blurred cover --><!-------------------------------->
        <div class="page" style="position:absolute; top:0px">
            <div class="bracelet_cover_text_set">
                <div class="bracelet_cover_text" style="z-index:5">
                    <img class="asset bg" src="images/none.png" data-src="images/bracelet_cover_txt.png"  >
                </div>
                <img class="asset bg bracelet_cover_text_bg" src="images/none.png" data-src="images/bracelet_blur_cover.jpg"  style="position:absolute;-webkit-clip-path:inset( 66.64% 0% 17.3% 0% )">
                <img class="asset bg bracelet_cover_text_glassbg" src="images/none.png" data-src="images/bracelet_blur_cover.jpg"  style="visibility:hidden;">
            </div>
        </div>
        <!-------------------------------->
        <div class="bracelet_cover_sketchA_sep page page_sep"></div>
        <!-------------------------------->
        <div class="page bracelet_sketchA subpage shado" style="background-color:#000">
            <!-- problem discription --><!-------------------------------->
            <div class="page bracelet_sketch1">
                <div style="width:50.321%;float:left;">
                    <img class="asset bg" src="images/none.png" data-src="images/bracelet_problemdiscL.png"  >
                </div>
                <div style="width:49.679%;float:left;">
                    <img class="asset bg" src="images/none.png" data-src="images/bracelet_problemdiscR.png" >
                </div>
            </div>
            <!-- sketchA --><!-------------------------------->
            <div class="page bracelet_sketch2">
                <img class="asset bg" src="images/none.png" data-src="images/bracelet_sketchA.jpg"  >
            </div>
            <!-- sketchB --><!-------------------------------->
            <div class="page bracelet_sketch3">
                <img class="asset bg" src="images/none.png" data-src="images/bracelet_sketchB.jpg"  >
            </div>
        </div>
        <!-------------------------------->
        <div class="bracelet_sceneA_sep page page_sep"></div>
         <!-- scene --><!-------------------------------->
        <div class="page bracelet_sceneA subpage shado" style="background-color: #000;z-index:11">
            <div class="scene1" style="width:56.5%;float:left">
                <img class="asset bg" src="images/none.png" data-src="images/bracelet_sceneA.jpg"  >
            </div>
            <div class="scene2" style="width:43.5%;float:left">
                <img class="asset bg" src="images/none.png" data-src="images/bracelet_sceneB.jpg"  >
            </div>
        </div>
    </div>
    <div id="bracelet_sep_ipostage" class="page page_sep group"></div>
    <!-------------------------------->
    <!-------------------------------->
    <div id="ipostage_container" class="page group" style="width:100%;z-index:70;">
        <div id="ipostage_precover_sep" class="page page_sep group"></div>
        <!--clear cover--><!-------------------------------->
        <div class="page ipostage_clear_cover" style="position:relative">
            <img class="asset bg" src="images/none.png" data-src="images/ipostage_cover.jpg" >
        </div>
        <!--blur cover--><!-------------------------------->
        <div class="page ipostage_blur_cover glass shado" style="top:0px">
            <div>
                <img class="asset bg" src="images/none.png" data-src="images/ipostage_blur_cover.jpg"  >
            </div>
        </div>
        <!--cover text and gloss bg--><!-------------------------------->
        <div class="page" style="position:absolute; top:0px">
            <div class="ipostage_cover_text_set">
                <div class="ipostage_cover_text" style="z-index:5">
                    <img class="asset bg" src="images/none.png" data-src="images/ipostage_cover_text.png"  >
                </div>
                <!-- proc(524, 651, 717, 157) -->
                <img class="asset bg ipostage_cover_text_bg" src="images/none.png" data-src="images/ipostage_blur_cover.jpg"  style="position:absolute;-webkit-clip-path:inset( 46.7% 11.19% 43.3% 62.0% )">
                <img class="asset bg ipostage_cover_text_glassbg" src="images/none.png" data-src="images/ipostage_blur_cover.jpg"  style="visibility:hidden;">
            </div>
        </div>
        <!---->
        <div class="ipostage_cover_sketchA_sep page page_sep"></div>
        <div class="page ipostage_sketchA subpage shado" style="background-color:#000">
            <!--problem discription--><!-------------------------------->
            <div class="page ipostage_sketch1">
                <div style="width:50.125%;float:left;">
                    <img class="asset bg" src="images/none.png" data-src="images/ipostage_problemdiscL.jpg"  >
                </div>
                <div style="width:49.875%;float:left;">
                    <img class="asset bg" src="images/none.png" data-src="images/ipostage_problemdiscR.jpg"  >
                </div>
            </div>
            <!--problem definition--><!-------------------------------->
            <div class="page ipostage_sketch2">
                <div style="width:50.125%;float:left;">
                    <img class="asset bg" src="images/none.png" data-src="images/ipostage_problemdefL.jpg"  >
                </div>
                <div style="width:49.875%;float:left;">
                    <img class="asset bg" src="images/none.png" data-src="images/ipostage_problemdefR.jpg"  >
                </div>
            </div>
        </div>
        <!--sceneeA--><!-------------------------------->
        <div class="ipostage_sceneA_sep page page_sep"></div>
        <div class="page ipostage_sceneA subpage shado" style="background-color: #000">
            <div class='scene1' style="width:33.625%;float:left;">
                <img class="asset bg" src="images/none.png" data-src="images/ipostage_sceneA1.jpg"  >
            </div>
            <div class='scene2' style="width:32.875%;float:left;">
                <img class="asset bg" src="images/none.png" data-src="images/ipostage_sceneA2.jpg"  >
            </div>
            <div class='scene3' style="width:33.5%;float:left;">
                <img class="asset bg" src="images/none.png" data-src="images/ipostage_sceneA3.jpg"  >
            </div>
        </div>
        <!--sceneB------------------------------>
        <div class="ipostage_sceneB_sep page page_sep"></div>
        <div class="page ipostage_sceneB subpage shado">
            <div class='scene1' style="width:45.25%;float:left;">
                <img class="asset bg" src="images/none.png" data-src="images/ipostage_sceneB1.jpg"  >
            </div>
            <div class='scene2' style="width:54.75%;float:left;">
                <img class="asset bg" src="images/none.png" data-src="images/ipostage_sceneB2.jpg"  >
            </div>
        </div>
    </div>
    <div id="ipostage_sep_voiphone" class="page page_sep group"></div>
    <!-------------------------------->
    <!-------------------------------->
    <div id="voiphone_container" class="page group" style="width:100%;z-index:60;">
        <div id="voiphone_precover_sep" class="page page_seq group"></div>
        <!--clear cover--><!-------------------------------->
        <div class="page voiphone_clear_cover" style="position:relative">
            <img class="asset bg" src="images/none.png" data-src="images/voiphone_cover.jpg"  >
        </div>
        <!--blur cover--><!-------------------------------->
        <div class="page voiphone_blur_cover glass shado" style="top:0px">
            <div>
                <img class="asset bg" src="images/none.png" data-src="images/voiphone_blur_cover.jpg"  >
            </div>
        </div>
        <!--cover text and gloss bg--><!-------------------------------->
        <div class="page" style="position:absolute;top:0px">
            <div class="voiphone_cover_text_set">
                <div class="voiphone_cover_text" style="z-index:5">
                    <img class="asset bg" src="images/none.png" data-src="images/voiphone_cover_text.png"  >
                </div>
                    <!--proc(433, 719, 1136, 235)-->
                <img class="asset bg voiphone_cover_text_bg" src="images/none.png" data-src="images/voiphone_blur_cover.jpg" style="position:absolute; -webkit-clip-path:inset(71.9% 1.94% 4.61% 27.07%)">
                <img class="asset bg voiphone_cover_text_glassbg" src="images/none.png" data-src="images/voiphone_blur_cover.jpg"   style="visibility:hidden;">
            </div>
        </div>
        <div class="voiphone_cover_sketchA_sep page page_sep"></div>
        <div class="page voiphone_sketchA subpage shado" style="background-color: #000">
            <!--sketchA--><!-------------------------------->
            <div class="page voiphone_sketch1">
                <img class="asset bg" src="images/none.png" data-src="images/voiphone_sketchA.jpg"  >
            </div>
            <!-- sketchB--><!-------------------------------->
            <div class="page voiphone_sketch2">
                <img class="asset bg" src="images/none.png" data-src="images/voiphone_sketchB.jpg"  >
            </div>
            <!--scene--><!-------------------------------->
            <div class="page voiphone_sketch3">
                <img class="asset bg" src="images/none.png" data-src="images/voiphone_sceneA.jpg"  >
            </div>
        </div>
    </div>
    <div id="voiphone_sep_mpurse" class="page page_sep group"></div>
    <!-------------------------------->
    <!-------------------------------->
    <div id="mpurse_container" class="page group" style="width:100%;z-index:50;">
        <div id="mpurse_precover_sep" class="page page_sep group"></div>
        <!-- clear cover --><!-------------------------------->
        <div class="page mpurse_clear_cover" style="position:relative">
            <img class="asset bg" src="images/none.png" data-src="images/mpurse_cover.jpg"  >
        </div>
        <!-- blur cover --><!-------------------------------->
        <div class="page mpurse_blur_cover glass shado" style="top:0px">
            <div>
                <img class="asset bg" src="images/none.png" data-src="images/mpurse_blur_cover.jpg" >
            </div>
        </div>
        <!-- cover text--><!-------------------------------->
        <div class="page" style="position:absolute;top:0px">
            <div class="page mpurse_cover_text_set">
                <div class="mpurse_cover_text" style="z-index:5">
                    <img class="asset bg mpurse_cover_text" src="images/none.png" data-src="images/mpurse_cover_text.png"  >
                </div>
                <!--proc(625, 401, 461, 518)-->
                <img class="asset bg mpurse_cover_text_bg" src="images/none.png" data-src="images/mpurse_blur_cover.jpg" style="position:absolute;-webkit-clip-path:inset(43.64% 32.13% 0.0% 39.07%)">
                <img class="asset bg mpurse_cover_text_glassbg" src="images/none.png" data-src="images/mpurse_blur_cover.jpg" style="visibility:hidden">
            </div>
        </div>
        <div class="mpurse_cover_sketchA_sep"></div>
        <!-- sketch --><!-------------------------------->
        <div class="page shado mpurse_sketchA subpage">
            <img class="asset bg" src="images/none.png" data-src="images/mpurse_sketch.jpg"  >
        </div>
        <!-- sceneA --><!-------------------------------->
        <div class="mpurse_sceneA_sep"></div>
        <div class="page shado mpurse_sceneA subpage">
            <img class="asset bg" src="images/none.png" data-src="images/mpurse_sceneA.jpg"  >
        </div>
        <!-- sceneB --><!-------------------------------->
        <div class="mpurse_sceneB_sep"></div>
        <div class="page shado mpurse_sceneB subpage">
            <img class="asset bg" src="images/none.png" data-src="images/mpurse_sceneB.jpg"  >
        </div>
    </div>
    <div id="mpurse_sep_multimedia" class="page page_sep group"></div>
    <!--<div id="multimedia_container" class="page group" style="background-color:#000;height:300px;width:100%;z-index:40;"></div>-->
</div>
<div id="footer" style=" position:fixed; width:100%; height:20px;bottom:0px"></div>
<!-- End Save for Web Slices -->



<script>
    function _log(){
        if (sys.version.indexOf('Mobile') != -1) return
        console.log.apply(console, arguments)
    }

    var header_trigger = jQuery('div#menu_trigger')
        layer_bt_light = jQuery('div#layer_bt_light'),
        about_bt_light = jQuery('div#about_bt_light'),
        layer_bt_dark  = jQuery('div#layer_bt_dark'),
        about_bt_dark  = jQuery('div#about_bt_dark'),
        header_menu    = jQuery('div.header_menu'),
        menu_container = jQuery('div#header_menu_container'),
        dark_header    = jQuery('div#dark_menu_header'),
        light_header   = jQuery('div#light_menu_header'),
        about_container= jQuery('div#about_container'),
        section1_cells = jQuery('div.header_menu_icon_table:eq(0)').find('div.header_menu_item_cell'),
        section2_cells = jQuery('div.header_menu_icon_table:eq(1)').find('div.header_menu_item_cell'),
        anim           = TweenMax,
        scene          = $(window), scene.petmate = {}, scene.radiolamp = {}, scene.header_home = {}
        history        = window.history,
        header_height  = 52,
        scene_blocker  = undefined,
        all_pages      = jQuery('div.page')
        mousekit       = {delta:{}, onwheel:false},
        controller     = null
        header_controller = null
        footer_instance= jQuery('div#footer')
        raw_body       = jQuery('body').html()
        raw_script     = jQuery('script').eq(-1)
        mask_data      = {petmate:{}, mpurse:{},     mplamp:{},    others:{},   mpbracelet:{},
                          usb:{},     multimedia:{}, radiolamp:{}, voiphone:{}, }
    _log('header trigger:', header_trigger)

    // property initialize
    // all_pages.height($(window).height())
    layer_bt_target = header_menu
    about_bt_target = about_container
    about_bt_target.attr({orig_height: about_bt_target.height()})
    layer_bt_light.attr({close_pos: -menu_container.height(),orig_pos : 0, float_pos: header_basepos()})
    header_menu.attr({state:'closed', triggered:'false', trigger:''})
    header_menu.addClass('header_menu_closed')
    anim.set(menu_container, {top:-menu_container.height()})


    // actions initialize
    // ---------------------------------------------
    section1_cells.bind( "mouseenter", function() {
        var target = jQuery(this).find('div.menu_item1>div').eq(1)
        anim.to(target,.4, {display:'none', alpha:0})
        _log('add hide', target)
    })
    section1_cells.bind( "mouseleave", function() {
        var target = jQuery(this).find('div.menu_item1>div').eq(1)
        // TweenLite.to(icon, 4, {rotation:360, left:400, ease:Bounce.easeOut, delay:1});
        anim.to(target,.4, {display:'block', alpha:1})
        _log('remove hide', target)
    })

    //---------------------------------------
    function layer_hout(){
        _log('layer hover')
        var target = jQuery(this).find('div').eq(1)
        anim.to(target, 0.4, {display:'none', alpha:0})
    }
    function layer_hover(){
        _log('layer hout')
        var target = jQuery(this).find('div').eq(1)
        anim.to(target, 0.4, {display:'block', alpha:1})
    }
    layer_bt_light.bind ('mouseover' , layer_hout)
    layer_bt_light.bind ('mouseleave', layer_hover)
    layer_bt_dark.bind  ('mouseover' , layer_hout)
    layer_bt_dark.bind  ('mouseleave', layer_hover)
    about_bt_light.bind ('mouseover' , layer_hout)
    about_bt_light.bind ('mouseleave', layer_hover)
    about_bt_dark.bind  ('mouseover' , layer_hout)
    about_bt_dark.bind  ('mouseleave', layer_hover)

    function expand_header(){
        header_menu.attr('state', 'expand')
        header_menu.css('top', 0)
        light_header.css('top', 0)
        dark_header.css('top', 0)
        var about = $('div#about_container')
            header_menu.css({position:'relative', height:'auto'})
            anim.set(dark_header,  { alpha:1} ); //show
            anim.set(light_header,  { alpha:0} ); //hide
            anim.set(menu_container,  {top: layer_bt_light.attr('orig_pos')})
            header_menu.removeClass('header_menu_closed')
            about.css({opacity:1, display:'block', height:'auto'})
        header_controller.enabled(true)
    }
    function open_header(trigger){
        _log('open_header trigger:', trigger)
        header_menu.attr({state:'open', trigger:trigger})
        header_menu.removeClass('header_menu_closed')
        anim.to(dark_header,.4  , { alpha:1} ); //show
        anim.to(light_header,.4 , { alpha:0} ); //hide
    }
    function close_header(trigger, callback, params){
        function _callback(){
            if(callback != undefined){
                _log('callback != undefined')
                callback(params[0])
            }
        }
        header_menu.attr({state:'closed', trigger:''})
        anim.to(about_bt_target,.4  , {height:0}); // hide
        anim.to(dark_header,.4  , { alpha:0}); // hide
        anim.to(light_header,.4 , { alpha:1}); // show
        anim.to(menu_container , .4, {top: layer_bt_light.attr('close_pos'),
            onComplete:_callback,
            onCompleteParams:params })
    }
    //----------------------------------------
    function layer_func(){
        if (header_menu.attr('state') == 'open'){
            if(header_menu.attr('trigger') == 'layer'){
                _log('layer: close layer')
                close_header('layer')
            }else{
                _log('layer: close about then open layer')
                header_menu.attr({trigger:'layer'})
                close_header('layer', open_layer,[])
            }
        }else{
            dark_header.css('top', 0)
            _log('unclose')
            open_layer()
        }
    }
    function open_layer(){
        header_menu.attr({trigger:'layer'})
        open_header('layer')
        anim.to(menu_container,.4, {top: layer_bt_light.attr('orig_pos')})
        anim.to(about_bt_target,.4  , {display:'none', alpha:0}); // hide
    }
    function open_about(){
        var height = parseInt(about_bt_target.attr('orig_height'))
        _log('about: open about')
        open_header('about')
        anim.set(about_bt_target, {display:'block', alpha:1}); // show
        anim.to(about_bt_target,.4 , {height:height})
        anim.to(menu_container,.4, {top: parseInt(layer_bt_light.attr('close_pos')) +height   })
    }
    layer_bt_light.bind ('click', layer_func);
    layer_bt_dark.bind  ('click', layer_func);
    about_bt_light.bind ('click', function(){
        if (header_menu.attr('state') == 'open'){
            if (header_menu.attr('trigger') == 'about'){
                _log('about: close about')
                close_header('about')
                anim.to(about_bt_target,.3 , {height:0})
            }else{
                _log('about: close layer then open about')
                header_menu.attr({trigger:'about'})
                close_header('layer', open_about, [])
            }
        }else{
            dark_header.css('top', 0)
            header_menu.attr({trigger:'about'})
            open_about()
        }
    })

    function header_basepos(){
        return 2.0167 * scene.height()
        return 3.308 * scene.height()
    }

    function touchMoveFn(tp, base_pos, y, deltay, d){
        if (tp > base_pos){
            if(header_menu.attr('state') == 'expand'){
                header_closed_state()
            }
            var is_visible = parseInt(header_menu.css('top')) == 0
            if ( header_menu.attr('triggered') != 'true' && header_menu.attr('state') == 'closed' &&   Math.abs(deltay) > 1){

                //bottom block of screen
                _log(y, tp, y-tp , scene.height()/2)
                if ( (y-tp ) > scene.height()/2 ){
                    // hide
                    if ( d >= 0 &&  is_visible==true) {
                        _log('H',d, tp, base_pos, (y-tp) , scene.height()/2)
                        header_menu.attr({triggered:'true'})
                        anim.to(header_menu, .5, {delay:.5, top:-52, onComplete:function(){
                            header_menu.attr({triggered:'false'})
                        }})
                    }
                }else{
                    //upper block of screen
                    // show
                    if ( parseInt(header_menu.css('top')) == -52 && d <=0 ) {
                        _log('S',d, tp, base_pos, (y-tp) , scene.height()/2)
                        header_menu.attr({triggered:'true'})
                        anim.to(header_menu, .5, {
                            delay:.5, top: 0, onComplete: function () {
                                header_menu.attr({triggered: 'false'})
                            }
                        })
                    }
                }
            }
        }
    }

    function mouseOverInit(){
        var body = jQuery('body')
        scene.on('taphold', function(event){
            _log('hold')
        })
        function touchInit(event){
            scene.touch.touchx = event.originalEvent.touches[0].clientX;
            scene.touch.touchy = event.originalEvent.touches[0].clientY;
            scene.touch.lastx = event.originalEvent.touches[0].clientX;
            scene.touch.lasty = event.originalEvent.touches[0].clientY;
            scene.touch.lastsx = event.originalEvent.touches[0].screenX;
            scene.touch.lastsy = event.originalEvent.touches[0].screenY;
        }

        scene.on("orientationchange",function(event){
          //alert("Orientation is: " + event.orientation);

        });

        function mousemove(event){
            if(mousekit.onwheel == true) return
            var delta = mousekit.delta
            var x = event.pageX, y = event.pageY, deltax = x-delta.x, deltay = y-delta.y
            var self = $(this)
            var tp = self.scrollTop()
            var trigger_range = 140
            var base_pos = 3.308 * scene.height()
            if (sys.version.indexOf('Mobile') != -1  ){
                if(y < tp + trigger_range){}
                //mobile mode
//                if( header_menu.attr('state') == 'closed' && header_menu.attr('triggered') != 'true' && header_menu.position().top < base_pos && Math.abs(deltay) > 1  ){
//                    header_menu.attr({triggered:'true'})
//                    anim.to(header_menu, .5, {top:base_pos , onComplete:function(){
//                        header_menu.attr({triggered:'false'})
//                    }})
//                }
            }else{
                _log('mousemove')
                touchMoveFn(tp, base_pos, y, deltay, 0)
            }
            delta.x = x
            delta.y = y
        }

        scene.on('touchstart', function(event){
            touchInit(event)
            _log('tap')
        })
        scene.on('touchend', function(event){
            //_log(scene.touch.touchy - scene.touch.lasty)
        })

        function touchMoveFnB(event){
            if(sys.version.indexOf('Mobile') != -1) return
            var x = event.originalEvent.touches[0].clientX
                y = event.originalEvent.touches[0].clientY,
            dx    = event.originalEvent.touches[0].clientX  - scene.touch.lastx,
            dy     = event.originalEvent.touches[0].clientY - scene.touch.lasty,
            dsx    = event.originalEvent.touches[0].screenX - scene.touch.lastsx,
            dsy    = event.originalEvent.touches[0].screenY - scene.touch.lastsy,
            tp    = scene.scrollTop(),
            base_pos = 3.308 * scene.height(),
            expanded =  parseInt(menu_container.css('top')) == 0
            mousemove(event.originalEvent.touches[0])
            function test(){
                if(tp <= 400 + base_pos && expanded == false) {
                    if (dy < 0 && header_menu.attr('triggered') != 'true' ){
                        _log('scrollup, show it permanently')
                        header_menu.attr({triggered:'true'})
                        scrollUpdate( tp, scene.header_home.trigger.scrollOffset(), base_pos,undefined, expanded  )
                        header_menu.attr('triggered', 'false')
                    }else{
                        if(header_menu.attr('triggered') != 'true'){
                            header_menu.attr({triggered:'true'})
                            scrollUpdate( tp, scene.header_home.trigger.scrollOffset(), base_pos,undefined, expanded  )
                            header_menu.attr('triggered', 'false')
                        }
                        _log('0scrolldown, hide it permanently', dy < 0 , header_menu.attr('triggered') == 'false')
                    }
                }else if(tp > 400 + base_pos && expanded == false){
                    if (dy < 0  && header_menu.attr('triggered') != 'true'){
                        _log('scrollup, show it and hide it')
                        header_menu.attr({triggered:'true'})
                        scrollUpdate( tp, scene.header_home.trigger.scrollOffset(), base_pos,undefined, expanded  )
                        header_menu.attr('triggered', 'false')
                    }else{
                        if ( header_menu.attr('triggered') != 'true' ){
                            _log('1scrolldown, hide it permanently')
                            scrollUpdate( tp, scene.header_home.trigger.scrollOffset(), base_pos,undefined, expanded  )
                        }
                    }
                }
            }
            if (dy > 0){
                _log('touchmove')
                touchMoveFn(tp, base_pos, tp + event.originalEvent.touches[0].screenY, dy, dy)
                test()
            }else if(dy < 0) {
                _log('touchmove')
                touchMoveFn(tp, base_pos, tp + event.originalEvent.touches[0].screenY, dy, dy)
                test()
            }
            scene.touch.lastx = event.originalEvent.touches[0].clientX;
            scene.touch.lasty = event.originalEvent.touches[0].clientY;
            scene.touch.lastsx = event.originalEvent.touches[0].screenX;
            scene.touch.lastsy = event.originalEvent.touches[0].screenY;
            scene.touch.dx = dx
            scene.touch.dy = dy
            scene.touch.dsx = dsx
            scene.touch.dsy = dsy
        }

        scene.touch = {}
        scene.height = function(){ return document.body.clientHeight }
        scene.width  = function(){ return document.body.clientWidth  }
        if (sys.version.indexOf('Mobile') != -1){
            scene.height = function(){ return window.screen.availHeight }
            scene.width = function(){ return window.screen.availWidth }
            scene.bind('touchmove', touchMoveFnB);
            _log('mobile mouseOverInit!!', sys.version)
        }else{
            _log('desktop mouseOverInit!!')
            mousekit.delta = {x:0, y:0}
            body.mousemove(mousemove)
        }
    }

    function get_scroll_pos(){
        scene._scrlt0   = Date.now()
        scene._scrld    = Math.min(Math.min(scene._scrlt0 - scene._scrlt1, 100)/100 + 0.2, 1 )
        scene._scrlt1   = scene._scrlt0
        var scrollTop   = scene.scrollTop();
        return scrollTop - parseInt(scene._scrlt_event_delta * scene._scrldistance / scene._scrld);
    }


    function scrollUpdate(top, tmp , base_pos, twn, expanded){
//        _log('scrollupdate!!', top , base_pos + 0.75*scene.height(), expanded)
        if (top < base_pos + 0.75*scene.height()){
            if(top < tmp +15 && top > tmp - 15){
                header_controller.scrollTo(scene.header_home.trigger)
                if (twn){twn.kill()}else{
                    scene.unbind('touchmove')
                    scene.bind('touchmove')
                }
            }
            if (expanded == true){
                //if ( base_pos - top > 30 )  header_closed_state()
            }else if (expanded == false){
                _log('scroll expand header')
                expand_header()
            }
        }else if (top > base_pos+ 0.75*scene.height() ){
            if(expanded == true){
                _log('scroll close header')
                header_closed_state()
            }
        }
    }

    function naturalScroll(){
        scene._scrlt = 1
        scene._scrldistance = 250
        scene._scrlt1 = Date.now()
        scene._scrlt0 = 0
        scene._scrld = 0
        var scroll_acc = 0
        scene.on('mousewheel DOMMouseScroll', function(event){
            mousekit.onwheel = true
            event.preventDefault();
            scene._scrlt_event_delta = event.originalEvent.wheelDelta / 120 || -event.originalEvent.detail / 3;
            var finalScroll = scene._scrl_final = get_scroll_pos();
            var is_scrollup = scene._scrlt_event_delta > 0;
            var top         = scene.scrollTop();
            var render_mask;
            var base_pos = header_basepos()
            var tmp= scene.header_home.trigger.scrollOffset(), acc=0
            var expanded =  parseInt(menu_container.css('top')) == 0
            var twn = anim.to(scene, scene._scrlt, {
                scrollTo: {y: finalScroll, autoKill: false},
                ease: Power1.easeOut,
                overwrite: 5,
                onComplete: function(){
                    mousekit.onwheel = false
                },
                onUpdate: function(){
                    top         = scene.scrollTop()
                    scrollUpdate( top, tmp, base_pos, twn, expanded  )
                }
            })


            if(top <= 400 + base_pos && expanded == false) {
                scroll_acc = 0
                if (is_scrollup && header_menu.attr('triggered') != 'true' ){
                    _log('scrollup, show it permanently')
                    header_menu.attr({triggered:'true'})
                    anim.to(header_menu, .5, {top:0, onComplete:function(){
                        header_menu.attr({triggered: 'false'})
                    }})
                }else{
                    _log('scrolldown, hide it permanently')
                }
            }else if(top > 400 + base_pos && expanded == false){
                scroll_acc = 0
                if (is_scrollup  && header_menu.attr('triggered') != 'true'){
                    _log('scrollup, show it and hide it')
                    header_menu.attr({triggered:'true'})
                    anim.to(header_menu, .5, {top:0, delay:.2, onComplete:function(){
                        header_menu.attr({triggered:'false'})
                    }})
                }else{
                    if ( header_menu.attr('triggered') != 'true' ){
                        _log('scrolldown, hide it permanently')
                        anim.to(header_menu, .5, {top:-52, delay:.5, onComplete:function(){
                            header_menu.attr({triggered:'false'})
                        }})
                    }
                }
            }

            if( render_mask ){
                // todo implementation
            }

        })
    }


    function newClip(percent, pth){
        var top    = parseInt(pth[0].split('inset(')[1].slice(0,-1)) + percent*100
        var bottom = parseInt(pth[2].slice(0, -1)) - percent*100
        return 'inset(' + top+'% ' + pth[1] + ' ' + bottom + '% ' + pth[3]

    }

    var footer_height = 0
    function footerize(selector){
        if(sys.version.indexOf('Mobile') != -1) return
        var h
        if(selector == undefined) selector = scene.current_scene
        if (selector.constructor == Number) {
            _log('footerize init number', selector)
            h = selector
        }else{
            var instance = jQuery(selector)
            var _h = instance.height()
            if ( _h == 0 ){
                if(instance.find('>img').length > 0){
                    if(footerize(selector + '>img')){
                        return footerize(selector + '>img')
                    }else{
                    }
                }
                h = footer_height
            }else{
                footer_height = scene.height() - _h
                h = footer_height
            }
        }
        _log('footerize:::', h, footer_height, scene.height(), _h)
        TweenMax.to('div#footer'  ,.4, {height: h })
        footer_height=h
        scene.current_scene = selector
    }

    function toggle_header_state( condition ){
        if( condition == 'expand'){
            if (header_menu.attr('state') == 'expand') {header_closed_state()}
            else if(header_menu.attr('state') == 'closed'){
                _log('expand header')
                expand_header()
            }
        }
    }


    function header_closed_state(){
        menu_container.css( 'top', -2*header_menu.height() )
        dark_header.css({opacity:0, top:-52})
        light_header.css({opacity:1, top:-52})
        anim.to('div#light_menu_header', 0.4, {top:0})
        header_menu.css({position: 'fixed'})
        header_menu.attr('state', 'closed')
        header_menu.addClass('header_menu_closed')
        jQuery('div.menu_dropdown_span').css({display:'none'})
        header_controller.enabled(false)
    }
    function header_open_state(){

    }
    function remove_header_scrollmagic(){
        header_controller.destroy(true)
    }
    function header_scrollmagic(update){
        expand_header()

        if(update==true){
            remove_header_scrollmagic()
        }
        var tmp = { triggerElement: "div#about_container_trigger",
                duration: function(){ return 0.5 * scene.height() },
                offset:1}
        scene.header_home.trigger = new ScrollMagic.Scene(tmp)
        .triggerHook(0)
        .addTo(header_controller)

        var anime_data = {easing:Power0.easeOut}
        function shift(){ return $('div#header_menu').height() *.97 }
        anime_data.__defineGetter__('top', shift)

        if (sys.version.indexOf('Mobile') == -1){
            var twn = TweenMax.to('div.content_container', 100 , anime_data)
            tmp = { triggerElement: "div.menu_dropdown_span",
                        duration: function(){ return  1*scene.height() },
                        offset:0}
            scene.header_home.about = new ScrollMagic.Scene(tmp)
            .triggerHook(1)
            .addTo(header_controller)
            .setTween(twn)
            .addIndicators({name:'header'})
            .on('leave', function(){
                var expanded = parseInt(menu_container.css('top')) == 0
            })
            if (update != true){
                $('div.content_container').css({top:$('div#header_menu').height() - scene.height()*0.8})
                return shift()
            }
        }else{
            if (update != true){
                $('div.content_container').css({top:$('div#header_menu').height()*0.9 })
                return $('div#header_menu').height() *0.9
            }
        }


    }

    function scrollMagicInit(update_scene){
        if(sys.version.indexOf('Mobile') != -1) return
        if(update_scene==undefined) update_scene=false
        controller = new ScrollMagic.Controller();
        header_controller = new ScrollMagic.Controller();
        var h = $(window).height()
        var updater = {}
        function moveup(num){
            return num
        }
        function setUpdater(key, fn){
            if(!updater.hasOwnProperty(key)) updater[key] = []
            updater[key].push([key, fn])
        }
        function getClipPath(clip_path){
            var l, lst, i
            clip_path = clip_path.split(' ')
            if(clip_path.length != 4){
                l = 4-clip_path.length
                i = 0
                clip_path[clip_path.length-1] = clip_path[clip_path.length-1].slice(0, -1)
                for(i=0; i<l; i++){
                    clip_path.push('0%')
                }
                clip_path[clip_path.length-1] = clip_path[clip_path.length-1] + ')'
            }
            return clip_path
        }

        function header(){
            jQuery('div#footer').height(0)
            return header_scrollmagic()
        }

        function petmate(_shift){
            // build tween
            function update(e){
                _log('update: ', e.type)
                if (e.type == "enter") {
                } else {
                }
            }
            var text_duration = 1.5, cover_duration = 3.5, container = jQuery('div#petmate_container')
            scene.petmate = {video: scene.petmate.video,
                             entered:false,
                             orig_height: 0,
                             pins:{title: {leave:false,
                                          entered:false,
                                          initial_percentage: text_duration/cover_duration},
                                          graphA:{leave:false, entered:false},
                                          graphB:{leave:false, entered:false} }}
            var height = 924
            var gloss_glass = jQuery("div.petmate_cover_blur>div")
            var text_bg     = jQuery('div.petmate_cover_text_set>img.glassbg')
            var clip_path   = text_bg[0].style.clipPath || text_bg[0].style.webkitClipPath
            var shrink      = 0
            var ratio       = function(){ return scene.width()/1600 }
            var scene_h     = function(){ return height * scene.width()/1600}
            var h_ratio     = function(){ return scene_h()/scene.height() }
            text_bg.orig_pos = text_duration * scene.height() //+ header_height
            clip_path        = clip_path.split(' ')




            var tmp = { triggerElement: "#petmate_container",
                        duration: function(){ return cover_duration * scene.height() },
                        offset:1}
            scene.petmate.container = new ScrollMagic.Scene(tmp)
            .setPin("div.petmate_cover_clear")
            .triggerHook(0)
            //.addIndicators()
            .addTo(controller)
            .on('progress enter', function(event){
                if (event.type == 'progress'){
                    if (scene.petmate.pins.title.leave == true && event.progress > scene.petmate.pins.title.initial_percentage){
                        var initial = -cover_duration * (event.progress - scene.petmate.pins.title.initial_percentage)
                        var pth = newClip( initial/h_ratio() , clip_path)
                        var pos = scene.scrollTop() - (text_bg.orig_pos + _shift)
                        text_bg.css('-webkit-clip-path', pth)
                        text_bg.css('top', pos )
                    }
                }else{
                    footerize("div.petmate_cover_clear")
                }
            })

            // -------------------------------------------------------
            // pin for cover text
            tmp = { triggerElement: "#petmate_container",
                    duration: function(){ return text_duration*scene.height()  } ,
                    offset:1}
             new ScrollMagic.Scene(tmp)
            .setPin("div.petmate_cover_text_set")
            .triggerHook(0)
            //.addIndicators() // add indicators (requires plugin)
            .addTo(controller)
            .on('progress leave', function(event){
                gloss_glass.css('top', event.progress * text_duration*scene.height()  )
                scene.petmate.pins.title.leave = false
                if(event.type == 'leave'){
                    scene.petmate.pins.title.leave = true
                }else if(event.type == 'enter'){
                    scene.petmate.pins.title.leave = false
                }
            })

            // -------------------------------------------------------
            // pin for cover text
             new ScrollMagic.Scene({ triggerElement: "div.petmate_sketch_img",
                                    duration: function(){ return 2.5*scene.height()},
                                    offset:1})
            .setPin("div.petmate_sketch_img")
            .triggerHook(0)
            //.addIndicators() // add indicators (requires plugin)
            .addTo(controller).on('enter', function(event){
                 footerize('div.petmate_sketch_img')
             })

             // -------------------------------------------------------
             // pin for problem discription
             new ScrollMagic.Scene({ triggerElement: "div.petmate_problemdisc",
                                    duration: function(){ return 1.75*scene.height()} ,
                                    offset:1})
            .setPin("div.petmate_problemdisc")
            .triggerHook(0)
            //.addIndicators() // add indicators (requires plugin)
            .addTo(controller).on('enter', function(event){
                 footerize("div.petmate_problemdisc")
             })
            jQuery("div.petmate_problemdisc").parent().css('top', -scene.height())

            // -------------------------------------------------------
            // pin for figureA
             new ScrollMagic.Scene({ triggerElement: "div.petmate_figures",
                                    duration: function(){ return 2*scene.height()},
                                    offset:1})
            .setPin("div.petmate_figures")
            .triggerHook(0)
            //.addIndicators({name:'graphic page'}) // add indicators (requires plugin)
            .addTo(controller)
            .on('enter leave', function(event){
                if (event.type == 'leave'){
                    _log('on video:', event.type)
                    if (event.type == 'leave'){
                        scene.petmate.video.playbackRate(0)
                        scene.petmate.video.load()
                    }
                }else{
                    footerize("div.petmate_figures")
                }
            })
            jQuery("div.petmate_figures").parent().css('top', -2*scene.height())
            shrink += moveup(2*scene.height())

            //------------------------------------
            // black circular figure
            var anim_data = {opacity:1, top:-11}
            anim_data.__defineGetter__('top', function(){ return scene.height() * 0.012 })
            var twn = TweenMax.to("div.petmate-black-circular-figure", 7, anim_data)
            new ScrollMagic.Scene({ triggerElement: "div.petmate_figures",
                                    duration: function(){ return scene.height() *0.2},
                                    offset:1})
            .triggerHook(.7)
            //.addIndicators({name:'circular'}) // add indicators (requires plugin)
            .addTo(controller).setTween(twn)
            jQuery("div.petmate-black-circular-figure").css({top: function(){ return 0.3*scene.height()}, opacity:0})

            //-----------------------------------
            //  colored circle
            twn = TweenMax.to("div.petmate-colored-graph", 7, anim_data)
            tmp = { triggerElement: "div.petmate_figures",
                    duration: function(){ return scene.height() * 0.2 },
                    offset: function(){ return 0.2* scene.height()}  }
            tmp.__defineGetter__('offset', function(){ return 0.2* scene.height()} )
            new ScrollMagic.Scene(tmp)
            .triggerHook(.7)
            //.addIndicators({name:'colored figure'}) // add indicators (requires plugin)
            .addTo(controller).setTween(twn)
            jQuery('div.petmate-colored-graph').css({top: function(){ return 0.3*scene.height()}, opacity:0})
            jQuery('div.petmate-colored-graph>video').css({opacity:.3, top:'75%'})

            //---------------------------------------
            // video fadein
            twn = TweenMax.to('div.petmate-colored-graph>video', 7, {opacity:1, top:'82%'})
            tmp = { triggerElement: "div.petmate_figures",
                    duration: function(){return scene.height() *0.2},
                    offset: function(){return 0.3*scene.height()} }
            tmp.__defineGetter__('offset', function(){return 0.3*scene.height()})
            new ScrollMagic.Scene(tmp)
            .triggerHook(.7)
            //.addIndicators({name:'video'}) // add indicators (requires plugin)
            .addTo(controller).setTween(twn)
            .on('end leave', function(event){
                        _log('on video:', event.type)
                        if (event.type == 'leave'){
                            scene.petmate.video.playbackRate(1)
                            scene.petmate.video.play()
                        }
                    })

            //---------------------------------------------------
            twn = TweenMax.to("div.petmate-figure-text", 7, anim_data)
            tmp = { triggerElement: "div.petmate_figures",
                    duration: function(){ return scene.height() *0.2} ,
                    offset: function(){ return 0.1*scene.height()} }
            tmp.__defineGetter__('offset', function(){ return 0.1*scene.height()})
            new ScrollMagic.Scene(tmp)
            .triggerHook(.7)
            //.addIndicators({name:'figure text'}) // add indicators (requires plugin)
            .addTo(controller).setTween(twn)
            .on('leave', function(event){
                _log('on video:', event.type)
                if (event.type == 'leave'){
                    scene.petmate.video.playbackRate(0)
                    scene.petmate.video.load()
                }
            })
            jQuery('div.petmate-figure-text').css({top:0.3*scene.height(), opacity:0})

            if(scene.petmate.orig_height == 0){
                scene.petmate.orig_height = container.height() - shrink
            }
            container.height(scene.petmate.orig_height)
            _log('orig height::', container.height())
        }
        function update_petmate(){
            var container = jQuery('div#petmate_container')
            jQuery("div.petmate_problemdisc").parent().css('top', -scene.height())
            jQuery("div.petmate_figures").parent().css('top', -2*scene.height(0))
            shrink = 2*scene.height()
            jQuery('div.petmate-figure-text').css({top:0.3*scene.height(), opacity:0})
            scene.petmate.orig_height = container.height() - shrink
            container.height(scene.petmate.orig_height)
        }
        function radiolamp(){
            scene.radiolamp = {  video: scene.radiolamp.video,
                                 entered:false,
                                 orig_height: 0}
            var container = jQuery('div#radio_container'),
                shrink = 0,
                cover_duration =2,
                container_duration =0.8,
                sketch_duration = 4,
                twn = new TimelineMax()
                    .add([
                        TweenMax.to('div#radio_container', 1.2 ,  {top:1}),
                        TweenMax.to('div.radio_cover_text',1, {top:"37.52%", opacity:1, delay:.24})
                    ]);
            container.css({top: -0.85*scene.height()})
            jQuery('div.radio_cover_text').css({top:"0%", opacity:0})

            // -------------------------------------------------------
            // petmate cross to radiolamp
            scene.radiolamp.petmate_sep_radio = new ScrollMagic.Scene(
                  { triggerElement: "div#petmate_sep_radio",
                    duration      : function(){ return container_duration*scene.height() },
                    offset        : 0})
            .triggerHook(.8)
            //.addIndicators({name:'radio_container'})
            .addTo(controller)
            .setTween(twn)
            .on('leave enter', function(event){
                if(event.type == 'leave'){
                    if (container.css('top')!='0px' ){
                        _log('leave video loadit')
                        scene.radiolamp.video.load()
                        scene.radiolamp.video.playbackRate(0)
                    }
                }
            })

            // -------------------------------------------------------
            // pin for video and play it
            scene.radiolamp.radio_video = new ScrollMagic.Scene(
                  { triggerElement: "div#petmate_sep_radio",
                    duration      : function(){ return cover_duration*scene.height() },
                    offset        : 0})
            .triggerHook(0)
            //.addIndicators({name:'radio_video'})
            .addTo(controller)
            .on('enter leave', function(event){
                if (event.type == 'enter'){
                    try{this.setPin('div.radio_cover_bg')}catch(e){}
                    this.duration(3*scene.height())
                    if(scene.radiolamp.video.paused()==true) scene.radiolamp.video.play()
                    scene.radiolamp.video.playbackRate(1)
                    footerize('div.radio_cover_bg')
                }
            })

            var shift_sketch = 3* scene.height(), shift_scene = 5.5*scene.height()
            jQuery('div.radio_sketch_img').css({top:shift_sketch})
            jQuery('div.radio_scene').css({top:shift_scene})


            // -------------------------------------------------------
            // pin for sketch image
            scene.radiolamp.sketch_img = new ScrollMagic.Scene(
                  { triggerElement: "div.radio_sketch_img",
                    duration      : function(){ return sketch_duration*scene.height() },
                    offset        : 0})
            .triggerHook(0)
            //.addIndicators({name:'radio_sketch_img'})
            .addTo(controller)
            .on('enter', function(event){
                try{this.setPin(('div.radio_sketch_img'))}catch(e){}
                footerize('div.radio_sketch_img')
            })

            // -------------------------------------------------------
            // re-pin video and play it
            var tmp =
                  { triggerElement: "div.radio_scene",
                    duration      : function(){ return sketch_duration*scene.height()},
                    offset        : function(){ return -(shift_scene - shift_sketch - h)} }
            tmp.__defineGetter__('offset', function(){ return -(shift_scene - shift_sketch - h)})
            scene.radiolamp.video_bg = new ScrollMagic.Scene(tmp)
            .triggerHook(1)
            //.addIndicators({name:'pin video again'})
            .addTo(controller)
            .on('enter', function(event){
                try{this.setPin('div.radio_cover_bg')}catch(e){}
                if(scene.radiolamp.video.paused()==true)  scene.radiolamp.video.play()
                footerize('div.radio_scene')
            })

            // -------------------------------------------------------
            // pin scene
            scene.radiolamp.scene = new ScrollMagic.Scene(
                  { triggerElement: "div.radio_scene",
                    duration      : function(){ return 2*scene.height()},
                    offset        : 0})
            .triggerHook(0)
            //.addIndicators({name:'pin radio scene'})
            .addTo(controller)
            .on('enter leave', function(event){
                if (event.type == 'enter'){
                    _log('enter radio_scene')
                    try{this.setPin('div.radio_scene')}catch(e){}
                    footerize('div.radio_scene' )
                }else if(event.type == 'leave'){
                    scene.radiolamp.video.playbackRate(0)
                }
            })
        }
        function update_radiolamp(){
            jQuery('div.radio_cover_text').css({top:"0%", opacity:0})
            var shift_sketch = 3* scene.height(), shift_scene = 5.5*scene.height()
            jQuery('div.radio_sketch_img').css({top:shift_sketch})
            jQuery('div.radio_scene').css({top:shift_scene})
        }
        function mplamp(){
            //(blur_duration, text_duration, cover_duration, shrink, sketch_duration, scene_duration, clipPath)
            scene.mplamp = {entered:    false,
                            orig_height: 0}
            var gloss_glass        = jQuery("div.mplamp_blur_cover > div")
            var container          = jQuery('div#mplamp_container'),
                shrink             = 0.5,
                cover_duration     = 4 ,
                blur_duration      = 1.2,
                text_duration      = 4 ,
                sketch_duration    = 1.5,
                height             = 924,
                ratio              = function(){ return scene.width()/1600 },
                scene1_duration    = 3 ,
                scene_h            = function(){ return height*ratio() },
                h_ratio            = function(){ return scene_h()/scene.height() }

            scene.mplamp = {
            entered:false,
            orig_height: 0,
            pins:{title: {leave:false,
                      entered:false},
                      graphA:{leave:false, entered:false},
                      graphB:{leave:false, entered:false} }}

            container.css({top:-shrink*scene.height()})
            // -------------------------------------------------------
            // pin clear cover
            var tmp = {
                triggerElement: "#radio_sep_mplamp",
                duration: function(){ return cover_duration*scene.height() } ,
                offset:   function(){ return -shrink*scene.height() }}
            tmp.__defineGetter__('offset', function(){ return -shrink*scene.height()} )
            scene.mplamp.container = new ScrollMagic.Scene(tmp)
            .triggerHook(0)
            //.addIndicators({name:'mplamp pin cover'})
            .setPin('div.mplamp-cover')
            .addTo(controller)
            .on('enter', function(event){
                footerize('div.mplamp-cover')
            })
            // -------------------------------------------------------
            // pin blur cover
            scene.mplamp.container = new ScrollMagic.Scene({
                triggerElement: "#mplamp_precover_sep",
                duration: function(){ return blur_duration*scene.height() },
                offset:0})
            .triggerHook(0)
            //.addIndicators({name:'radio blur cover ____________________________'})
            .addTo(controller).on('enter leave', function(event){
                if(event.type == 'enter'){
                    _log('pin mplamp blur cover')
                     try{this.setPin('div.mplamp_blur_cover')}catch(e){}
                    // bug under fixed position
                    jQuery('div.mplamp_blur_cover').css({overflow:'visible'})
                    gloss_glass.css({top:0})
                } else{
                    jQuery('div.mplamp_blur_cover').css({overflow:'hidden'})
                }
            })

            // -------------------------------------------------------
            // pin for cover text
             new ScrollMagic.Scene({ triggerElement: "#radio_sep_mplamp",
                                    duration: function(){ return text_duration*scene.height() },
                                    offset:1})
            .triggerHook(shrink)
            //.addIndicators({name:'text set'}) // add indicators (requires plugin)
            .addTo(controller)
            .on('enter progress leave', function(event){
                if(event.type == 'enter'){
                    try{this.setPin('div.mplamp_cover_text_set')}catch(e){}
                    _log('pin text')
                }
                if (event.progress > blur_duration/text_duration ) {
                    gloss_glass.css('top', event.progress * text_duration*h - blur_duration*h)
                    if( jQuery('div.mplamp_blur_cover').css('overflow') == 'visible') {
                        jQuery('div.mplamp_blur_cover').css({overflow:'hidden'})
                    }
                }
                scene.mplamp.pins.title.leave = false
                if(event.type == 'leave'){
                    scene.mplamp.pins.title.leave = true
                    jQuery('div.mplamp_blur_cover').css({overflow:'hidden'})
                    _log(event.type, 'hidden')
                }else if(event.type == 'enter'){
                    scene.mplamp.pins.title.leave = false
                    jQuery('div.mplamp_blur_cover').css({overflow:'visible'})
                    gloss_glass.css({top:0})
                    _log(event.type, 'visible')
                }
            })

            //----------------------------------
            //  problem disc
            var twn1 = TweenMax.to("div.mplamp-problemdisc",44 , {opacity:1, top:0})
            scene.mplamp.sk1 = new ScrollMagic.Scene({
                triggerElement: "div.mplamp_cover_sketch_sep",
                duration: function(){ return 0.3*scene.height()},
                offset:0})
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-problemdisc'})
            .addTo(controller)
            .setTween(twn1)
            jQuery("div.mplamp-problemdisc").css({top:.6*scene.height(), opacity:0})


            twn1 = TweenMax.to("div.mplamp-sketchA",55, {opacity:1, top:0, ease:Power1.easeOut})
            var tmp = {
                triggerElement: "div.mplamp_cover_sketch_sep",
                duration: function(){ return 0.6*scene.height()},
                offset: 0 }
            tmp.__defineGetter__('offset', function(){ return 0.1*scene.height()} )
            scene.mplamp.sk2 = new ScrollMagic.Scene(tmp)
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sketchA'})
            .addTo(controller)
            .setTween(twn1)
            jQuery("div.mplamp-sketchA").css({top:.6*scene.height(), opacity:0})


            twn1 = TweenMax.to("div.mplamp-sketchB",55, {opacity:1, top:0, ease:Power1.easeOut})
            tmp = { triggerElement: "div.mplamp_cover_sketch_sep",
                    duration: function(){ return 0.9*scene.height()} ,
                    offset: 0 }
            tmp.__defineGetter__('offset', function(){ return 0.2*scene.height()})
            scene.mplamp.sk3 = new ScrollMagic.Scene(tmp)
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sketchB'})
            .addTo(controller)
            .setTween(twn1)
            jQuery("div.mplamp-sketchB").css({top:.9*scene.height(), opacity:0})


            new ScrollMagic.Scene({
                triggerElement: "div.mplamp_sk1",
                duration: function(){ return sketch_duration*scene.height()},
                offset:0})
            .triggerHook(0)
            //.addIndicators({name:'mplamp_sk1'})
            .addTo(controller)
            .on('enter', function(){
                try{this.setPin("div.mplamp_sk1")}catch(e){}
                footerize("div.mplamp_sk1")
            })
            var subpages = container.find('div.subpage')
            subpages.eq(0).css({top:(sketch_duration  + cover_duration)*scene.height()})

            //-----------------------------------------
            //   scene1
            new ScrollMagic.Scene({
                triggerElement: "div.mplamp-scene1",
                duration: function(){ return scene1_duration*scene.height()} ,
                offset:0})
            .triggerHook(0)
            //.addIndicators({name:'div.mplamp-scene1'})
            .addTo(controller)
            .setPin("div.mplamp-scene1")
            .on('enter', function(){
                _log('enter secne')
                footerize("div.mplamp-scene1")
            })

            twn1 = TweenMax.to("div.mplamp-sceneA",44, {opacity:1, top:0, ease:Power1.easeOut})
            new ScrollMagic.Scene({
                triggerElement: "div.mplamp_sketch_scene1_sep",
                duration: function(){ return 0.2*scene.height() },
                offset:0})
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sceneA'})
            .addTo(controller)
            .setTween(twn1)

            twn1 = TweenMax.to("div.mplamp-sceneB",44, {opacity:1, top:0, ease:Power1.easeOut})
            tmp = { triggerElement: "div.mplamp_sketch_scene1_sep",
                    duration: function() { return 0.4*scene.height() } ,
                    offset: 0 }
            tmp.__defineGetter__('offset', function() { return 0.1*scene.height()})
            new ScrollMagic.Scene(tmp)
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sceneB'})
            .addTo(controller)
            .setTween(twn1)

            twn1 = TweenMax.to("div.mplamp-sceneC",44, {opacity:1, top:0, ease:Power1.easeOut})
            tmp  = { triggerElement: "div.mplamp_sketch_scene1_sep",
                     duration: function(){ return 0.6*scene.height()} ,
                     offset: 0 }
            tmp.__defineGetter__('offset', function(){ return 0.2*scene.height()})
            new ScrollMagic.Scene(tmp)
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sceneC'})
            .addTo(controller)
            .setTween(twn1)
            jQuery('div.mplamp-sceneA').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneB').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneC').css({opacity:0, top:0.5*h})


            // -------------------------------------------------------
            // scene2
            subpages.eq(1).css({top:(sketch_duration  + cover_duration+scene1_duration )*scene.height()})
            var new_height = parseInt(subpages.eq(1).css('top').split('.px')[0]) +subpages.eq(1).height() + 1.8*scene.height()
            new ScrollMagic.Scene({
                triggerElement: "div.mplamp-scene2",
                duration: function(){ return scene1_duration*scene.height()},
                offset:0})
            .triggerHook(0)
            //.addIndicators({name:'div.mplamp-scene2'})
            .addTo(controller)
            .setPin("div.mplamp-scene2")
            .on('enter', function(){
                _log('enter secne')
                footerize("div.mplamp-scene2")
            })


            twn1 = TweenMax.to("div.mplamp-sceneD",44, {opacity:1, top:0, ease:Power1.easeOut})
            new ScrollMagic.Scene({
                triggerElement: "div.mplamp-scene2",
                duration: function(){ return 0.2*scene.height()},
                offset:0})
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sceneD'})
            .addTo(controller)
            .setTween(twn1)

            twn1 = TweenMax.to("div.mplamp-sceneE",44, {opacity:1, top:0, ease:Power1.easeOut})
            new ScrollMagic.Scene({
                triggerElement: "div.mplamp-scene2",
                duration: function(){ return 0.4*scene.height()} ,
                offset:0})
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sceneE'})
            .addTo(controller)
            .setTween(twn1)

            twn1 = TweenMax.to("div.mplamp-sceneF",44, {opacity:1, top:0, ease:Power1.easeOut})
            new ScrollMagic.Scene({
                triggerElement: "div.mplamp-scene2",
                duration: function(){ return 0.6*scene.height()} ,
                offset:0})
            .triggerHook(.8)
            //.addIndicators({name:'mplamp-sceneF'})
            .addTo(controller)
            .setTween(twn1)
            jQuery('div.mplamp-sceneD').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneE').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneF').css({opacity:0, top:0.5*h})
            container.height( new_height-0.3*scene.height() )
        }
        function update_mplamp(){
            var container = jQuery('div#mplamp_container')
            var subpages = container.find('div.subpage')
            var sketch_duration = 1.5, cover_duration = 4, h = scene.height()

            container.css({top:-shrink*scene.height()})
            jQuery("div.mplamp-problemdisc").css({top:.6*h, opacity:0})
            jQuery("div.mplamp-sketchA").css({top:.6*h, opacity:0})
            jQuery("div.mplamp-sketchB").css({top:.9*h, opacity:0})

            subpages.eq(0).css({top:(sketch_duration  + cover_duration)*h })
            var new_height = parseInt(subpages.eq(1).css('top').split('.px')[0]) + subpages.eq(1).height() + 1.8 * h

            jQuery('div.mplamp-sceneA').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneB').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneC').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneD').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneE').css({opacity:0, top:0.5*h})
            jQuery('div.mplamp-sceneF').css({opacity:0, top:0.5*h})
            container.height( new_height-0.3*scene.height() )
        }
        function usb(){
            // build tween
            function update(e){
                _log('update: ', e.type)
                if (e.type == "enter") {
                } else {                }
            }
            var text_duration = 2.5,
                cover_duration = 4,
                shrink = 0.75 ,
                blur_duration = 1.5,
                item_duration = 1,
                container = jQuery('div#usb_container')
            scene.usb = {
                         entered:false,
                         orig_height: 0,
                         pins:{title: {leave:false,
                                      entered:false,
                                      initial_percentage: text_duration/cover_duration},
                                      graphA:{leave:false, entered:false},
                                      graphB:{leave:false, entered:false} }}

            var gloss_glass = jQuery("div.usb_blur_cover>div")
            var text_bg     = jQuery('div.usb_cover_text_set>img.usb_cover_text_bg')
            var clip_path   = text_bg[0].style.clipPath || text_bg[0].style.webkitClipPath
            var height      = 930
            var ratio       = function(){ return scene.width()/1600 }
            var scene_h     = function(){ return height*ratio()     }
            var h_ratio     = function(){ return scene_h()/scene.height() }
            var usb_item    = jQuery('div#usb_container>div.usb_items')
            clip_path       = getClipPath(clip_path)
            container.css({top:-shrink*scene.height()})

            // -------------------------------------------------------
            // pin clear cover
            var tmp = { triggerElement: "div#mplamp_sep_usb",
                        duration: function() { return cover_duration * scene.height() },
                        offset: function() { return -shrink * scene.height() } }
            tmp.__defineGetter__('offset', function() { return -shrink * scene.height()} )
            scene.usb.container = new ScrollMagic.Scene(tmp )
            .triggerHook(0)
            //.addIndicators({name:'usb clear cover'})
            .addTo(controller)
            .on('enter progress', function(event){
                if(event.type == 'enter'){
                    _log('enter usb container')
                    if(text_bg.orig_pos == undefined) text_bg.orig_pos = scene.scrollTop() + cover_duration*scene.height()
                    try{this.setPin('div.usb_clear_cover')}catch(e){}
                    footerize('div.usb_clear_cover')
                    container.height('auto')
                    container.height(container.height()*0.8276)
                    container.css('overflow', 'hidden')
                }
                if (scene.usb.pins.title.leave == true && event.type == 'progress'){
                    //var initial = -cover_duration * (event.progress - scene.usb.pins.title.initial_percentage)
                    var pos = scene.scrollTop() - text_bg.orig_pos
                    var initial = pos/scene_h()
                    if( pos > 0 && initial <= 1){
                        var pth = newClip( -initial , clip_path)
                        text_bg.css('-webkit-clip-path', pth)
                        text_bg.css('top', pos )
                        //_log('**',  pos , text_bg.orig_pos, initial, pth, event.type, event.progress, ( cover_duration + text_duration ) - 1)
                    }
                    if(pos > 0){
                        if (event.progress > 0.75 && usb_item.css('top') == '0px' ){
                            var tp = 0.25 * cover_duration *scene.height()
                            usb_item.css({top:-tp})
                            //_log('tp:', tp, event.progress, text_duration/cover_duration)
                        }
                    }
                }else{
                    //_log('00', scene.scrollTop() , text_bg.orig_pos, scene.scrollTop() - text_bg.orig_pos  )
                }
            })

            // -------------------------------------------------------
            // pin blur cover
            scene.usb.blur_cover = new ScrollMagic.Scene({
                triggerElement: "#usb_precover_sep",
                duration:  function(){ return blur_duration*scene.height()} ,
                offset:0})
            .triggerHook(0)
            //.addIndicators({name:'radio blur cover ____________________________'})
            .addTo(controller).on('enter leave', function(event){
                if(event.type == 'enter'){
                    _log('pin mplamp blur cover')
                    try{this.setPin('div.usb_blur_cover')}catch(e){}
                    // bug under fixed position
                    jQuery('div.usb_blur_cover').css({overflow:'visible'})
                    gloss_glass.css({top:0})
                } else{
                    jQuery('div.usb_blur_cover').css({overflow:'hidden'})
                }
            })


            // -------------------------------------------------------
            // pin for cover text
             new ScrollMagic.Scene({ triggerElement: "#usb_precover_sep",
                                     duration: function(){ return text_duration*scene.height()},
                                     offset:1 })
            .triggerHook(0)
            //.addIndicators({name:'usb cover text'}) // add indicators (requires plugin)
            .addTo(controller)
            .on('progress leave', function(event){
                if(event.type == 'enter'){
                    try{this.setPin('div.usb_cover_text_set')}catch(e){}
                    _log('pin text')
                }
                if (event.progress > blur_duration/text_duration ){
                    gloss_glass.css('top', event.progress * text_duration*scene.height() - blur_duration*scene.height())
                    //gloss_glass.css('top', event.progress * text_duration*h)
                    if( jQuery('div.usb_blur_cover').css('overflow') == 'visible'){
                        jQuery('div.usb_blur_cover').css({overflow:'hidden'})
                    }
                }
                scene.usb.pins.title.leave = false
                if(event.type == 'leave'){
                    scene.usb.pins.title.leave = true
                    jQuery('div.usb_blur_cover').css({overflow:'hidden'})
                    text_bg.orig_pos = scene.scrollTop()
                    _log(scene.scrollTop())
                }else if(event.type == 'enter'){
                    scene.usb.pins.title.leave = false
                    jQuery('div.usb_blur_cover').css({overflow:'visible'})
                    gloss_glass.css({top:0})
                }
            }).setPin("div.usb_cover_text_set")

            // -------------------------------------------------------
            //
            function anime_usb_item(id_name, order){
                var instance = jQuery(id_name)
                var peer = jQuery(id_name + '>div>div.peer_target')
                var _h = instance.height(), h = scene.height()
                var tp = -order * _h * 0.1
                var anim_data = { top:  tp - 0.05 * h  }
                anim_data.__defineGetter__('top', function(){ return tp - 0.05 * scene.height()})
                instance.css({top: tp})
                instance.css('z-index', order*2)
                var twn = TweenMax.to( id_name, 10, anim_data )
                var tmp = { triggerElement: id_name ,
                            duration: function(){ return item_duration*scene.height() } ,
                            offset:  function(){ return -order * instance.height() * 0.1 + 0.05*scene.height() }  }
                tmp.__defineGetter__('offset', function(){ return -order * instance.height() * 0.1 + 0.05*scene.height() })
                new ScrollMagic.Scene(tmp)
                .triggerHook(0.8)
                //.addIndicators({name:id_name}) // add indicators (requires plugin)
                .addTo(controller)
                .setTween(twn)
                .on('enter', function(event){
                    footerize(0)
                })
                _h = peer.height()
                peer.css({top: _h*0.03})
                twn = TweenMax.to( id_name+'>div>div.peer_target', 66, { top:  0  })
                new ScrollMagic.Scene({ triggerElement: id_name + '>div>div.peer_target' ,
                                        duration: function(){ return scene.height() } ,
                                        offset:  0  })
                .triggerHook(0.9)
                //.addIndicators({name:id_name}) // add indicators (requires plugin)
                .addTo(controller)
                .setTween(twn)
            }

            anime_usb_item('div.usb_pageA', 1)
            anime_usb_item('div.usb_pageB', 2)
            anime_usb_item('div.usb_pageC', 3)
            anime_usb_item('div.usb_pageD', 4)
            anime_usb_item('div.usb_pageE', 5)
            anime_usb_item('div.usb_pageF', 6)
            container.height('auto')
//            container.css( {height: container.height()*0.8276207991974586 } )
//            container.css({height:container.height()   , overflow:'hidden'})
        }
        function update_usb(){
            var container = jQuery('div#usb_container')
            container.height('auto')
            container.css( {height: container.height()*0.8276207991974586 }  )
            container.css( {height:container.height()   , overflow:'hidden'} )
            function update_usb_item(id_name, order){
                var instance = jQuery(id_name)
                var peer = jQuery(id_name + '>div>div.peer_target')
                var _h = instance.height(), h = scene.height()
                var tp = -order * _h * 0.1
                instance.css({top: tp})
                _h = peer.height()
                peer.css({top: _h*0.03})
            }
            update_usb_item('div.usb_pageA', 1)
            update_usb_item('div.usb_pageB', 2)
            update_usb_item('div.usb_pageC', 3)
            update_usb_item('div.usb_pageD', 4)
            update_usb_item('div.usb_pageE', 5)
            update_usb_item('div.usb_pageF', 6)
        }
        var _prekey
        var update_bracelet, update_ipostage, update_voiphone, update_mpurse
        function themeit(obj, _key){
            // build tween
            var reset_sketch = function(){

            }
            var reset_scene = function(){

            }
            function update(e){
                _log('update: ', e.type)
                if (e.type == "enter") {
                } else {                }
            }
            var defaults =  {
                container   : jQuery('div#{}_container'.format(_key)),
                gloss_glass : jQuery('div.{}_blur_cover>div'.format(_key)) ,
                text_bg     : jQuery('div.{}_cover_text_set>img.{}_cover_text_bg'.format(_key, _key)),
                blur_cover  : 'div.{}_blur_cover'.format(_key),
                clear_cover : 'div.{}_clear_cover'.format(_key),
                sep_id      : 'div#{}_sep_{}'.format(_prekey, _key),
                precover    : 'div#{}_precover_sep'.format(_key),
                text_set    : 'div.{}_cover_text_set'.format(_key),
                sketchA     : 'div.{}_sketchA'.format(_key),
                sketchB     : 'div.{}_sketchB'.format(_key),
                sceneA   : 'div.{}_sceneA'.format(_key),
                sceneB   : 'div.{}_sceneB'.format(_key),
                item        : 'div.{}_items'.format(_key),
                cover_next  : 'div.{}_items'.format(_key),
                peer        : false,
                durations   : {
                    text_duration:2, cover_duration:4, shrink:1,
                    blur_duration:1, item_duration:1, sketch_duration:1.5, scene_duration:2
            }}
            _prekey = _key
            defaults._update(obj)
            obj = defaults
            _log('updated obj:', obj)

            var text_duration  = obj.durations.text_duration,
                cover_duration = obj.durations.cover_duration,
                shrink         = obj.durations.shrink ,
                blur_duration  = obj.durations.blur_duration,
                item_duration  = obj.durations.item_duration,
                scene_duration = obj.durations.scene_duration,
                container      = obj.container,
                blur_cover     = obj.blur_cover,
                clear_cover    = obj.clear_cover,
                text_set       = obj.text_set
                precover       = obj.precover,
                sep_id         = obj.sep_id
            _scene = {
                 entered:false,
                 orig_height: 0,
                 pins:{title: {leave:false,
                              entered:false,
                              initial_percentage: text_duration/cover_duration},
                              graphA:{leave:false, entered:false},
                              graphB:{leave:false, entered:false} }}

            var gloss_glass     = obj.gloss_glass
            var text_bg         = obj.text_bg
            var clip_path       = text_bg[0].style.clipPath || text_bg[0].style.webkitClipPath
            var ratio           = function(){ return scene.width()/1600       }
            var scene_h         = function(){ return obj.scene_height*ratio() }
            var h_ratio         = function(){ return scene_h()/scene.height() }
            var item_scene      = jQuery(obj.item)
            var cover_next      = jQuery(obj.cover_next)
            var sketch_sceneA   = jQuery(obj.sketchA)
            var sketch_sceneB   = jQuery(obj.sketchB)
            var scenario_sceneA = jQuery(obj.sceneA)
            var scenario_sceneB = jQuery(obj.sceneB)
            clip_path           = getClipPath(clip_path)
            container.css({top:  -shrink*scene.height()})
            setUpdater(_key,function(){return {top:-shrink*scene.height()}} )
            _log('key:', _key, 'over next:',obj.cover_next, cover_next, cover_next.css('top'))
            // -------------------------------------------------------
            // pin clear cover
            var tmp = { triggerElement: sep_id,
                        duration: function(){ return cover_duration * scene.height()},
                        offset:   function(){ return -shrink*scene.height() }}
            tmp.__defineGetter__('offset', function(){ return -shrink*scene.height() })
            _scene.container = new ScrollMagic.Scene(tmp)
            .triggerHook(0)
            //.addIndicators({name:'usb clear cover'})
            .addTo(controller)
            .on('enter progress', function(event){
                if(event.type == 'enter'){
                    _log('enter usb container')
                    if(text_bg.orig_pos == undefined) text_bg.orig_pos = scene.scrollTop() + cover_duration*scene.height()
                    try{this.setPin(clear_cover)}catch(e){}
                    footerize(clear_cover)
                }

                if (_scene.pins.title.leave == true && event.type == 'progress'){
                    //var initial = -cover_duration * (event.progress - scene.usb.pins.title.initial_percentage)
                    var pos = scene.scrollTop() - text_bg.orig_pos
                    var initial = pos/scene_h()
                    if( pos > 0 && initial <= 1){
                        var pth = newClip( -initial , clip_path)
                        text_bg.css('-webkit-clip-path', pth)
                        text_bg.css('top', pos )
                    }
                    if(pos > 0){
                        if (event.progress > 0.75 && cover_next.css('top') == '0px' ){
                            var tp = 0.25 * cover_duration *scene.height()
                            cover_next.css({top: -tp})
//                            _log('tp:', tp, event.progress, text_duration/cover_duration)
                        }
                    }
                }else{
//                    _log('00', scene.scrollTop() , text_bg.orig_pos, scene.scrollTop() - text_bg.orig_pos  )
                }
            })

            // -------------------------------------------------------
            // pin blur cover
            _scene.blur_cover = new ScrollMagic.Scene({
                triggerElement: precover,
                duration: function(){ return blur_duration*scene.height() },
                offset:0})
            .triggerHook(0)
            //.addIndicators({name:'radio blur cover ____________________________'})
            .addTo(controller).on('enter leave', function(event){
                if(event.type == 'enter'){
                    _log('pin', _key, 'blur cover')
                    reset_sketch()
                    reset_scene()
                    // bug under fixed position
                    jQuery(blur_cover).css({overflow:'visible'})
                    gloss_glass.css({top:0})
                    _log('reset sketch and scene')
                    try{this.setPin(blur_cover)}catch(e){}
                } else{
                    jQuery(blur_cover).css({overflow:'hidden'})
                }
            })

            // -------------------------------------------------------
            // pin for cover text
             _scene.cover_text = new ScrollMagic.Scene({ triggerElement: precover,
                                    duration: function(){ return text_duration*scene.height() },
                                    offset:1 })
            .triggerHook(0)
            //.addIndicators({name:'usb cover text'}) // add indicators (requires plugin)
            .addTo(controller)
            .on('progress leave', function(event){
                if(event.type == 'enter'){
                    try{this.setPin(text_set)}catch(e){}
                    _log('pin text')
                }
                //_log(event.progress , blur_duration/text_duration)
                if (event.progress > blur_duration/text_duration ){
                    gloss_glass.css('top', event.progress * text_duration*scene.height() - blur_duration*scene.height())
                    if( jQuery(blur_cover).css('overflow') == 'visible'){
                        jQuery(blur_cover).css({overflow:'hidden'})
                    }
                }
                _scene.pins.title.leave = false
                if(event.type == 'leave'){
                    _scene.pins.title.leave = true
                    jQuery(blur_cover).css({overflow:'hidden'})
                    text_bg.orig_pos = scene.scrollTop()
                    _log(scene.scrollTop())
                }else if(event.type == 'enter'){
                    _scene.pins.title.leave = false
                    jQuery(blur_cover).css({overflow:'visible'})
                    gloss_glass.css({top:0})
                }
            }).setPin(text_set)
            // -------------------------------------------------------
            //                                                      --
            function anim_items(id_name, order){
                var instance = jQuery(id_name)
                var peer = jQuery(id_name + '>div>div.peer_target')
                var _h = instance.height()
                var tp = -order * _h * 0.1
                instance.css({top: tp})
                instance.css('z-index', order*2)
                setUpdater(_key, function(){ return {top: -order * instance.height() * 0.1} })
                var anim_data = {top:  tp - 0.05 * h, onComplete:function(){
                    _log('complete............')
                }}
                anim_data.__defineGetter__('top', function(){ return -order * instance.height() * 0.1- 0.05 * scene.height() } )
                var twn = TweenMax.to( id_name, 55, anim_data )
                var tmp = { triggerElement: id_name ,
                            duration: function(){ return item_duration*scene.height() } ,
                            offset:  -order * _h * 0.1 + 0.05*h  }
                tmp.__defineGetter__('offset', function(){ return -order * instance.height() * 0.1 + 0.05* scene.height() } )
                new ScrollMagic.Scene(tmp)
                .triggerHook(0.8)
                //.addIndicators({name:id_name}) // add indicators (requires plugin)
                .addTo(controller)
                .setTween(twn)
                .on('enter', function(event){
                    footerize(id_name)
                })
                if (obj.peer){
                    _h = peer.height()
                    peer.css({top: _h*0.03})
                    setUpdater(_key, function(){ return {top: peer.height() * 0.03 } })
                    twn = TweenMax.to( id_name+'>div>div.peer_target', 66, { top:  0  })
                    new ScrollMagic.Scene({ triggerElement: id_name+'>div>div.peer_target' ,
                                            duration: function(){ return peer.height() } ,
                                            offset:  0  })
                    .triggerHook(0.9)
                    //.addIndicators({name:id_name}) // add indicators (requires plugin)
                    .addTo(controller)
                    .setTween(twn)
                }
            }

            if(item_scene){
                var items = item_scene.find('>div.page') , i= 0, l = items.length
                for(i=0; i<l; i++){
                    _log(':::::::::::',  'div.{}_item{}'.format( _key, i+1 ), jQuery('div.{}_item{}'.format( _key, i+1 )))
                    anim_items(  'div.{}_item{}'.format( _key, i+1 )  , i+1 )
                }
            }
            var lst_duration = 0
            var acc_duration=0
            function sketchInit(alpha, order){
                var base_selector = obj.sketchA.slice(0,-1) + alpha +  '>div[class*={}_sketch]'.format(_key)
                var sketch = jQuery( base_selector )
                var _shrink = 1
                l = sketch.length
                lst_duration =  _shrink * obj.durations.sketch_duration
                acc_duration += _shrink * obj.durations.sketch_duration
                _log('sketchInit'+alpha+':', sketch, 'length:', l, 'sketch selector:', base_selector)
                //----------------------------------
                //  problem disc
                jQuery(obj.sketchA.slice(0,-1)+alpha).css( {top: scene.height()*( -order + cover_duration )} )
                setUpdater(_key, function(){ return {top: scene.height()*( -order + cover_duration )} } )
                for(i=0;i < l ; i++){
                    var block    = sketch.eq(i)
                    var selector = 'div.{}_sketch{}'.format(_key, i+1)
                    var trigger  = 'div.{}_cover_sketch{}_sep'.format(_key, alpha)
                    var _offset  = i * 0.05 * scene.height() - _shrink * scene.height()
                    twn1         = TweenMax.to( selector, 55, {opacity:1, top:0})
                    _log('sketch init', i)
                    _log('selector:', selector, 'trigger:', trigger, 'twn:', twn1)
                    new ScrollMagic.Scene({
                        triggerElement: trigger,
                        duration:function(){ return 0.3 * (i+1) * scene.height()},
                        offset: _offset }
                    ).triggerHook(0.8)
                    //.addIndicators({name:selector})
                    .addTo(controller)
                    .setTween(twn1)
                    jQuery(selector).css({ opacity:1, top:0.3*scene.height() })
                    setUpdater(_key, function(){ return { opacity:1, top:0.3*scene.height() } } )
                }
                selector = obj.sketchA.slice(0,-1)+alpha
                new ScrollMagic.Scene({
                    triggerElement: selector,
                    duration: function(){ return obj.durations.sketch_duration *scene.height()},
                    offset:0})
                .triggerHook(0)
                //.addIndicators({name:selector})
                .addTo(controller)
                .on('enter', function(){
                    try{this.setPin(selector)}catch(e){}
                    footerize(selector)
                })
                return _shrink
            }
            var sketch_acc = 0, scene_acc = 0
            if(sketch_sceneA.length){
                _log(_key, 'sketch sceneA', sketch_sceneA)
                sketch_acc += sketchInit('A', 1)
            }else{
                obj.sketch_duration = 0
            }
            if(sketch_sceneB.length){
                sketch_acc += sketchInit('B', 2)
            }

            var subpages = $( "div.subpage[class*={}_scene]".format(_key)), trigger
            function sceneInit(alpha, order){
                trigger = 'div.{}_scene{}'.format(_key, alpha)
                var page = subpages.eq(order)
                var _shrink = 1
                lst_duration =  obj.durations.scene_duration
                acc_duration += obj.durations.scene_duration
                _log(obj.durations.sketch_duration ,  shrink, 1 , cover_duration, _shrink, '::::', obj.durations.sketch_duration *  (shrink-1) + cover_duration-_shrink, (obj.durations.sketch_duration *  (shrink-1) + cover_duration-_shrink)*scene.height())
                _log('sceneInit'+alpha+':', trigger)
                //page.css({top:(obj.sketch_duration  + cover_duration)*scene.height()})
                //-----------------------------------------
                //   scene1
                _log(alpha, order, '_____________', obj.durations.scene_duration , scene.height(), obj.durations.scene_duration *scene.height(), 'length:', jQuery(trigger).length )
                new ScrollMagic.Scene({
                    triggerElement: trigger,
                    duration: function(){ return obj.durations.scene_duration * scene.height()} ,
                    offset:0})
                .triggerHook(0)
                //.addIndicators({name:trigger})
                .addTo(controller)
                .on('enter', function(){
                    _log('sceneInit enter secne', alpha, 'pin ', 'div.{}_scene{}'.format(_key, alpha))
                    try{this.setPin('div.{}_scene{}'.format(_key, alpha))}catch(e){}
                    footerize('div.{}_scene{}'.format(_key, alpha))

                })
                l = jQuery(trigger).length
                for(i=0; i<l ; i++){
                    var selector = trigger + '>div.scene{}'.format(i)
                    _log(i, 'scene selector:', selector)
                    twn1 = TweenMax.to( selector + '>div.scene{}'.format(i+1), 44, {opacity:1, top:0, ease:Power1.easeOut} )
                    tmp = {
                        triggerElement: trigger + '_sep',
                        duration: function(){ return 0.2* (i+1) * scene.height()},
                        offset:0    }
                    tmp.__defineGetter__('offset', function(){ return i*0.1*scene.height() })
                    new ScrollMagic.Scene(tmp).triggerHook(0.8)
                    //.addIndicators({name: selector})
                    .addTo(controller)
                    .setTween(twn1)
                    jQuery(selector).css({opacity:0, top: 0.5*scene.height()})
                }
                if (alpha == 'A'){
                    reset_scene = function(){
                        var ii= 0, ll = subpages.length, alphabet='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
                        for(ii=0; ii <ll; ii++){
                            jQuery('div.{}_scene{}'.format(_key, alphabet[ii])).css(
                                    { top: (obj.durations.sketch_duration *  sketch_acc + cover_duration-_shrink +(ii * scene_duration) )*scene.height() })
                            setUpdater(_key, function(){ return { top: (obj.durations.sketch_duration *  sketch_acc + cover_duration - _shrink + (ii * scene_duration) )*scene.height() }  } )
                            _log('reset_scene ======', (obj.durations.sketch_duration *  (shrink-(1+ll)) + cover_duration-_shrink +(ii * scene_duration) ),
                            (obj.durations.sketch_duration *  (shrink-(1+ll)) + cover_duration-_shrink +(ii * scene_duration) )*scene.height() )
                        }
                    }
                }
                jQuery(trigger).css('top', (obj.durations.sketch_duration * 1 + cover_duration-_shrink + scene_duration )*scene.height() )
                setUpdater(_key, function(){ return { top: (obj.durations.sketch_duration * 1 + cover_duration-_shrink + scene_duration )*scene.height() } } )
                return _shrink
            }
            _log('subpages::', subpages, 'sceneA:', scenario_sceneA, 'obj.sceneA:', obj.sceneA)
            if(scenario_sceneA.length){
                var ii= 0, ll = subpages.length, alphabet='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
                for(ii=0; ii <ll; ii++){
                    _log('sceneInit', ii, ll)
                    scene_acc += sceneInit(alphabet[ii], ii)
                }
                var _duration = obj.durations.sketch_duration  + obj.durations.cover_duration + obj.durations.scene_duration
                subpages.eq(ii-1).css({top:( _duration )*scene.height()})
                setUpdater(_key, function(){ return {top: _duration*scene.height()}  } )
                _log(_key, ii, '_____________-', subpages.eq(ii-1).css('top'), subpages.eq(ii-1))
            }
            container.height ( 'auto' )
            var new_height = (cover_duration + acc_duration) * scene.height()
            _log('new height : ', new_height)
            container.height( new_height  )
        }

        function update_themeit(name, height_ratio, items_page, sketch_page, scene_page){
            var container = jQuery('div#{}_container'.format(name)), i=0, l
            container.css( {height: container.height()*height_ratio      }  )
            container.css( {height: container.height(), overflow:'hidden'}  )
            setUpdater(_key, function(){ return {height: container.height()*height_ratio, overflow:'hidden'  }  })

            function update_anim_item(id_name, order){
                var instance = jQuery(id_name)
                var peer = jQuery(id_name + '>div>div.peer_target')
                var _h = instance.height()
                var tp = -order * _h * 0.1
                instance.css({top: tp})
                instance.css('z-index', order*2)
                setUpdater(_key, function(){ return {top: -order * instance.height() * 0.1 } } )
                if(peer.length > 0){
                    _h = peer.height()
                    peer.css({top: _h*0.03})
                    setUpdater(_key, function(){ return {top: peer.height()*0.03} } )
                }
            }
            if(items_page){
                l = items_page.length
                for(i=0; i<l; i++){
                    var d = items_page[i]
                    update_anim_item(d, i+1)
                }
            }
            if(sketch_page){
            }
            if(scene_page){
            }
        }

        if (update_scene == false){
            petmate  ( header() )
            radiolamp()
            mplamp   ()
            usb      ()
            //bracelet
            _prekey = 'usb'
            themeit({
                item: null,
                sceneA  : 'div.bracelet_sceneA',
                scene_height: 977,
                durations : {
                    text_duration:2.5, cover_duration:5, shrink:2,
                    blur_duration:1.5, item_duration:1, sketch_duration:2.5, scene_duration:2
            }}, 'bracelet')

            //ipostage
            themeit({
                item:null,
                sceneA  : 'div.ipostage_sceneA',
                sceneB  : 'div.ipostage_sceneB',
                scene_height:1000,
                durations : {
                    text_duration:2, cover_duration:4, shrink:3,
                        blur_duration:1, item_duration:1, sketch_duration:2.5, scene_duration:2
            }}, 'ipostage')

            // voiphone
            themeit({
                item:null,
                sketchB:null,
                sceneA  : null,
                sceneB : null,
                scene_height:1000,
                durations : {
                    text_duration:2, cover_duration:4, shrink:4,
                        blur_duration:1, item_duration:1, sketch_duration:1.5, scene_duration:2
            }}, 'voiphone')

            // mpurse
            themeit({
                sketch    : 'div.mpurse_sketch',
                cover_next: 'div.mpurse_sketch',
                sceneA  : 'div.mpurse_sceneA',
                sceneB  : 'div.mpurse_sceneB',
                item      : null,
                scene_height:919,
                durations : {
                    text_duration:3, cover_duration:5, shrink:4.75,
                        blur_duration:2, item_duration:1, sketch_duration:1.5, scene_duration:2
            }}, 'mpurse')
        }else{
//            update_petmate()
//            update_radiolamp()
//            update_mplamp()
//            update_usb()
//            for(var it in updater){
//                if(updater.hasOwnProperty(it)){
//                    var l = updater[it].length
//                    for(i=0; i<l ; i++){
//                        var rec = updater[it][i]
//                        rec[0].css(rec[1]())
//                        _log(i, rec[0], rec[1])
//                    }
//                }
//            }
            scene.unbind()
            controller.destroy(true)
            window.scene = {}
            controller.scrollTo(0)
            window.controller = {}
            jQuery('div').remove()
            jQuery('body').html(raw_body)
            jQuery('script').eq(-1).html('')
            jQuery('script').eq(-1).html(raw_script.html())
        }
    }


    function videoInit(){
        function petmate(){
            // create our popcorn instance
            var v = scene.petmate.video
            // listen for when the time is updated
            v.playbackRate(0)
            v.play()
            v.on( 'timeupdate', function( event ) {
                if (this.duration()-0.5 <= this.currentTime()){
                    this.play(0)
                }
                if (this.currentTime() >= 4.2 && this.currentTime() <= 5){
                    this.play(5.1)
                }
            });
            v.on('ended', function(){
                v.load() // back to the state of showing poster image
            })
        }
        function radio(){
            var v = scene.radiolamp.video
            v.playbackRate(0)
            v.on( 'timeupdate', function( event ) {
                if(this.duration()-0.2 <= this.currentTime()){
                    this.playbackRate(1)
                    this.play(1.1)
                    _log('play loop v2')
                }
            });
        }
        petmate()
        radio()
    }

    $( document ).ready(function() {
        _log( "ready!" );
        var container     = $('div.content_container')
        var assets        = $('body').find('img.asset')
        var loaded_images = 0, assets_amount = assets.length, loaded_videos = 0
        var videos = jQuery('video')
        var scene_ratio = 1600/900
        var resize_trigger

        function resize_window(){
            _log('resize!!')
            scrollMagicInit(true)
        }
        $(window).on('resize', function () {
            if(scene.initial_resize == undefined){
                scene.initial_resize = true
                return
            }
            clearTimeout(resize_trigger)
            footerize(scene.current_scene)
            resize_trigger = setTimeout(resize_window, 1500)
        });

        function blockerInit(){
            var w = Math.min(scene.height()*scene_ratio, 800)
            var platform = sys.version.indexOf('Mobile') != -1  ?  'Mobile' : 'Desktop'
            _log('minimum scene width:', w)
            scene_blocker = $.projectBlocker({
                responsive: 'hide',
                minWidth: w,
                platform: platform,
                homepage: 'show',
                homepageSelector: null,
                ie: 'show'
            });
            //scene_blocker.blockHome()
            scene_blocker.blockLoading()
        }

        function loadedImage(elm){
            loaded_images+=1
            var percentage = Math.floor((loaded_images / assets_amount) * 1000)/10
            var remains    = assets_amount - loaded_images
            var vremains   = videos.length - loaded_videos
            _log('loadedimage, progress:', percentage, 'remains ', remains + ' images, ' + vremains + ' videos')
            jQuery('p.percentage').text( Math.floor(percentage*100)/100 + '%')
        }

        function loadingImage(){
            _log('loading Image::')
            $('body').imageloader(
                {
                    selector: 'img.asset',
                    each: function (elm) {
                        loadedImage(elm)
                    },
                    eacherror: function(elem){
                         loadedImage(elem)
                    },
                    callback: function (elm) {
                        sceneInit()
                    }
                }
            );
        }

        function loadedVideo(popcorn_instance){
            loaded_videos += 1
            _log('video loaded', loaded_videos)
        }
        function dlvideo(v, order){
            var xhr = new XMLHttpRequest();
            xhr.open('GET', v.find('source').attr('data-src'), true);
            xhr.responseType = 'blob';
            xhr.onload = function(e) {
                if (this.status == 200) {
                    _log("got it");
                    var myBlob = this.response;
                    var vid = (window.webkitURL ? webkitURL : URL).createObjectURL(myBlob);
                    // myBlob is now the blob that the object URL pointed to.

                    v.attr('src', vid)
                    loaded_videos+=1
                    var pop = new Popcorn(v[0])
                    _log("Loading video into element", v, pop);
                    pop.load()
                    switch (order){
                        case 0:
                                scene.petmate.video2=''
                            scene.petmate.video2   = v
                            scene.petmate.video   = pop
                            break;
                        case 1:
                                scene.petmate.video2=''
                            scene.radiolamp.video2   = v
                            scene.radiolamp.video = pop
                            break;
                    }
                }
            }
            xhr.onprogress = function updateProgress(evt) {
               if (evt.lengthComputable)
               {  //evt.loaded the bytes browser receive
                  //evt.total the total bytes seted by the header
                 var percentComplete = (evt.loaded / evt.total)*100;
                 _log('loading video:',percentComplete, 'remains:', evt.total - evt.loaded)
                 jQuery('p.percentage').html( (loaded_images + 10*percentComplete)/assets_amount + '%' )
               }
            }

            xhr.send();
        }
        function loadingVideos(){
            dlvideo(videos.eq(0), 0)
            dlvideo(videos.eq(1), 1)
            assets_amount += 20
            return
            _log('loading videos')
            // we only want to show the controls of our video and begin playing it once more then half of the video has been loaded
            videos.eq(0).find('source').attr('src', videos.eq(0).find('source').attr('data-src') )
            videos.eq(1).find('source').attr('src', videos.eq(1).find('source').attr('data-src') )
            var pops = [
                new Popcorn(videos[0]),
                new Popcorn(videos[1])
            ]
            var loaded = []
            pops[0].load()
            pops[1].load()
            scene.petmate.video = pops[0]
            scene.radiolamp.video = pops[1]
            function test_loading() {
                var i, l = videos.length, v, buff
                // store the returned timeRanges object as we use it more than once
                for (i=0; i<l; i++) {
                    if (loaded.indexOf(i) != -1) continue
                    v    = pops[i];
                    buff = v.buffered();
                    // if we have buffered more then half the video
                    if ( buff.length > 0 && buff.end(0) ==  v.duration()  ) {
                        _log(i, "vidoe LOADED", buff.end(0), v.duration() );
                        loaded.push(i)
                        loadedVideo(v);

                    // if less then half the video has loaded call our function again
                    } else {
                        if (buff.length > 0){
                            _log('loading video:',buff.length, buff.end(0), v.duration())
                        }
                        setTimeout( test_loading, 100 );
                    }
                }
            }
            test_loading()
            //loaded_videos = 2
        }
        function assetsInit(){
            // lock screen
            lock()
            loadingImage()
            loadingVideos()
            // loading images and videos
            // call sceneInit()
        }
        function sceneInit(){
            if( loaded_videos != videos.length ){
                return setTimeout( sceneInit , 100 )}
            // setup Scenes
            mouseOverInit()
            naturalScroll()
            scrollMagicInit()
            videoInit()
            // unnlock screen
            unlock()
            locationInit()
        }
        function lock(){
            if (scene_blocker == undefined) {
                blockerInit()
            }else{
                //scene_blocker.blockHome()
                scene_blocker.blockLoading()
            }
        }
        function unlock(){
            scene_blocker.unBlockHome()
            scene_blocker.unBlockLoading()
        }
        assetsInit()
        _log('footer height!!!!!!!!!!!', scene.height(), jQuery('img.petmate_cover_text_glassbg').height()*jQuery('img.petmate_cover_text_glassbg').width()/1600)
        footerize(  (jQuery('img.petmate_cover_text_glassbg').height()*jQuery('img.petmate_cover_text_glassbg').width()/1600) - scene.height()  )
    });
    //-------------------------------------
    // decrecates..................
//    function maskInit(){
//    }
//    function clear_canvas(obj){
//        obj.ctx.clearRect(0,0,obj.ctx.canvas.width,obj.ctx.canvas.height )
//    }
//    function reload_page(){
//        $.ajax({
//            url: "",
//            context: document.body,
//            success: function(s,x){ $(this).html(s); }  });
//    }
//    function draw(obj){
//        var _w = Math.max(obj.canvas[0].width, obj.place.width()),
//            _h = Math.max(obj.canvas[0].height,  obj.place.height())
//        obj.canvas.height( _h)
//        obj.canvas.width(  _w)
//        obj.canvas[0].width = _w
//        obj.canvas[0].height = _h
//        _log('_w, _h', _w, _h)
//        var pos = obj.place.offset(), w = obj.place.width(), h = obj.place.height()
//        ratio = w/ obj.rimg.width
//        obj.ctx.drawImage(obj.img[0], pos.left/ratio, pos.top/ratio, w/ratio, h/ratio, 0, 0, w, h)
//    }
//    function maskImages(){
//        function petmate(){
//            mask_data.petmate.img      = jQuery('div.petmate_cover_blur>img.bg'),
//            mask_data.petmate.place    = jQuery('img.petmate_cover_text'),
//            mask_data.petmate.canvas   = jQuery('canvas.petmate_cover_text')
//            mask_data.petmate.ctx      = mask_data.petmate.canvas[0].getContext('2d')
//            mask_data.petmate.rimg     = new Image()
//            mask_data.petmate.rimg.src = mask_data.petmate.place[0].src
//            draw(mask_data.petmate)
//        }
//        petmate()
//    }
//    maskImages()

    function enterPage(stateid){
        history.pushState(stateid,stateid, '#'+stateid)
    }

    function hyperlinkInit(){
        $(document).on("click", "a[href^=\\#]", function (e) {
            var id = $(this).attr("href"), pos
            _log('id:', id)
            _log('$this:', $(this))
            if ($(id).length > 0) {
                e.preventDefault();
                // trigger scroll
                _log('scrollto id:', id)
                controller.scrollTo(id);
                pos = controller.scrollPos()
                controller.scrollTo(pos + scene.height())
                 // get offsetTop from id through jQuery(id).offsetTop
                if  (window.history && window.history.pushState && id != history.state) {
                    if(light_header.css('opacity') != 1 && parseInt(dark_header.css('top')) == 0 ){
                        history.pushState(id, document.title, id);
                        _log('reclick', light_header.css('opacity'), dark_header.css('opacity'), parseInt(dark_header.css('top')))
                        setTimeout(function (){layer_bt_dark.click()}, 333)
                    }
                }
            }
        });
    }
    function locationInit(){
        if (location.href.indexOf('#')!=-1){
            var id = location.href.split('#')[1]
            setTimeout(function(){document.getElementById(id+'_container').scrollIntoView()}, 200)
            enterPage(id)
        }else{
            // home
            location.href += '#about'
            enterPage('about')
            setTimeout(function(){document.getElementById("about_container").scrollIntoView()}, 200)
        }
    }
    hyperlinkInit()

    header_menu.attr('state', 'expand')





</script>


</body>
</html>